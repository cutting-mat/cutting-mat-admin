(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d732660"],{"45a5":function(e,t,r){"use strict";r("5151")},5151:function(e,t,r){},"8de5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tree",{ref:"tree",staticClass:"custom-tree",attrs:{data:e.list,props:e.defaultProps,"node-key":"id","default-expand-all":"","show-checkbox":e.picker,"check-strictly":""},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return r("div",{staticClass:"custom-tree-item"},[r("div",{staticClass:"flex-1 extendLable"},[s.url?r("span",{staticStyle:{color:"#67c23a"}},[r("i",{staticClass:"el-icon-medal"})]):e._e(),r("span",{class:{source:!!s.url},staticStyle:{"margin-right":"20px"}},[e._v(e._s(s.name))]),s.url?r("el-tag",{attrs:{size:"mini",type:e.typeColor[s.method]}},[r("i",{staticClass:"el-icon-position"}),e._v(" "+e._s(s.method.toUpperCase()))]):e._e(),r("el-tag",{attrs:{size:"mini",type:"info"}},[r("i",{staticClass:"el-icon-link"}),e._v(" "+e._s(s.route||s.url))])],1),e.picker?r("span",{staticClass:"extendGroup"},[r("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.handleCheckChange(s,!a.checked,!0)}}},[e._v("批量选择")])],1):r("span",{staticClass:"extendGroup"},[r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.resource.edit,expression:"resource.edit"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",s)}}},[e._v("编辑")]),s.route?r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.resource.add,expression:"resource.add"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("append",s)}}},[e._v("添加子菜单")]):e._e(),s.route?r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.resource.add,expression:"resource.add"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("add-resource",s)}}},[e._v("添加资源")]):e._e(),r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.resource.remove,expression:"resource.remove"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("remove",s)}}},[e._v("删除")])],1)])}}])})},s=[],i=r("c7b2"),n=r("bcc0"),c={model:{prop:"value",event:"change"},props:{picker:{type:Boolean,required:!1,default:!1},value:{type:Array,required:!1},listdata:{type:Array,required:!1}},data:function(){return{resource:n,list:[],defaultProps:{children:"children",label:"title"},typeColor:{get:"success",post:"primary",put:"warning",delete:"danger"},trigger:null}},watch:{listdata:{handler:function(e){Array.isArray(e)&&(this.list=e)},immediate:!0},value:{handler:function(){Array.isArray(this.value)&&this.$refs.tree.setCheckedKeys(this.value)},deep:!0}},methods:{handleCheckChange:function(e,t,r){var a=this,s=this.$refs.tree.getNode(e);s&&(this.$refs.tree.setChecked(s,t),r&&Array.isArray(e.children)&&e.children.length&&e.children.forEach((function(e){a.handleCheckChange(e,t,r)}))),this.$nextTick((function(){a.trigger()}))},fetchData:function(){var e=this;i["d"].action("permission").then((function(t){e.list=i["e"].buildTree(t.menus.concat(t.resources)),Array.isArray(e.value)&&e.$nextTick((function(){e.$refs.tree.setCheckedKeys(e.value)}))}))}},created:function(){this.listdata||this.fetchData()},mounted:function(){var e=this;this.trigger=i["e"].throttle((function(){var t=e.$refs.tree.getCheckedNodes();e.$emit("change",t.map((function(e){return e.id})))}))}},o=c,l=(r("45a5"),r("2877")),u=Object(l["a"])(o,a,s,!1,null,"952df1c4",null);t["default"]=u.exports}}]);