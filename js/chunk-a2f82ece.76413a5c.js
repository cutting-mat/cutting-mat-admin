(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2f82ece"],{3706:function(t,a,n){"use strict";n("b48b")},9865:function(t,a,n){"use strict";n.d(a,"e",(function(){return i})),n.d(a,"a",(function(){return r})),n.d(a,"f",(function(){return u})),n.d(a,"c",(function(){return o})),n.d(a,"g",(function(){return s})),n.d(a,"b",(function(){return l})),n.d(a,"d",(function(){return c}));var e=n("c7b2"),i=function(t){return e["a"].get("/password/valid",{params:t})},r=function(t){return e["a"].get("/captcha/image",{params:t})},u=function(t){return e["a"].get("/captcha/image/validate",{params:t})},o=function(t){return e["a"].get("/captcha/sms",{params:t})},s=function(t){return e["a"].get("/captcha/sms/validate",{params:t})},l=function(t){return e["a"].get("/emailValidCode",{params:t})},c=function(t){return e["a"].get("/emailValidCode/valid",{params:t})}},b48b:function(t,a,n){},dfc0:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("el-form",{ref:"form",staticClass:"auth_email",attrs:{model:t.formData,rules:t.rules,"label-position":"left","v-loading":t.loading}},[n("el-form-item",[t._v("安全邮箱："+t._s(t.anonymousEmail))]),n("el-form-item",{attrs:{prop:"inputEmail"}},[n("el-input",{attrs:{placeholder:"请输入安全邮箱","prefix-icon":"el-icon-message"},model:{value:t.formData.inputEmail,callback:function(a){t.$set(t.formData,"inputEmail",a)},expression:"formData.inputEmail"}})],1),n("el-form-item",{attrs:{prop:"userInput"}},[n("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.formData.userInput,callback:function(a){t.$set(t.formData,"userInput",a)},expression:"formData.userInput"}},[n("countdownButton",{ref:"countdownButton",attrs:{slot:"append",count:30},on:{click:t.sendValidCode},slot:"append"},[t._v("获取验证码")])],1)],1),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{"native-type":"button",type:"primary"},on:{click:t.handleSubmit}},[t._v("立即验证")])],1)],1)},i=[],r=n("9865"),u={data:function(){var t=this,a=function(a,n,e){n?(t.userEmail!==n&&e(new Error("邮箱不正确")),e()):e(new Error("请输入安全邮箱"))};return{loading:!1,formData:{id:null,userInput:null,inputEmail:null},rules:{inputEmail:[{validator:a}],userInput:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:6,message:"请输入正确的验证码",trigger:"blur"}]}}},computed:{userEmail:function(){return this.$store.state.user.email},anonymousEmail:function(){if(this.userEmail){var t=this.userEmail.split("@")[0].split(""),a=t.map((function(a,n){return 0===n||n===t.length-1?a:"*"})).join("");return"".concat(a,"@").concat(this.userEmail.split("@")[1])}return""}},methods:{sendValidCode:function(){var t=this;this.$refs.form.validateField("inputEmail",(function(a){a||(t.loading=!0,Object(r["b"])({email:t.formData.inputEmail}).then((function(a){t.loading=!1,a.data.id?(t.formData.id=a.data.id,t.$refs.countdownButton.start()):t.$message.warning("验证邮件发送失败，请稍后重试")})).catch((function(){t.loading=!1})))}))},handleSubmit:function(){var t=this;this.$refs.form.validateField("userInput",(function(a){a||(t.loading=!0,Object(r["d"])(t.formData).then((function(a){t.loading=!1,a.data?t.$emit("success",a.data):(t.$refs.form.resetFields(),t.$message.warning("验证失败"))})).catch((function(){t.loading=!1})))}))}}},o=u,s=(n("3706"),n("2877")),l=Object(s["a"])(o,e,i,!1,null,"6a9e8a9f",null);a["default"]=l.exports}}]);