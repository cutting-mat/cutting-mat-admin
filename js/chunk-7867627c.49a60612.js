(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7867627c"],{2127:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("c7b2"),n=function(e){return r["a"].get("/role/s",{params:e})},o=function(e){return r["a"].get("/role",{params:e})},i=function(e){return r["a"].post("/role",e)},c=function(e){return r["a"].put("/role",e)},u=function(e){return r["a"].delete("/role",{params:e})}},d780:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"scrollbar blockLayout"},[a("div",{staticClass:"flex-row align-center"},[a("el-form",{ref:"searchForm",staticClass:"flex-1",attrs:{inline:"",size:"small",model:e.queryParam}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.theCURD.search()}}},[e._v("搜索")]),a("el-button",{on:{click:function(t){e.$refs.searchForm.resetFields(),e.$refs.theCURD.search()}}},[e._v("重置")])],1)],1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.$refs.theCURD.create()}}},[e._v("添加")])],1),a("CURD",{ref:"theCURD",attrs:{api:e.apiObj,model:e.model,columns:e.columns,queryParam:e.queryParam,getItemFromDetaiApi:""},on:{"loading-state":e.handleLoading},scopedSlots:e._u([{key:"status",fn:function(t){return[t.row.state?a("span",{staticStyle:{color:"#13ce66"}},[e._v("已启用")]):a("span",{staticStyle:{color:"#ff4949"}},[e._v("已禁用")])]}},{key:"action",fn:function(t){return[a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.update,expression:"apiObj.update"}],attrs:{size:"mini"},on:{click:function(a){return e.$refs.theCURD.update(t.row)}}},[e._v(" 编辑 ")]),a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.resetPassword,expression:"apiObj.resetPassword"}],attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.resetPassword(t.row)}}},[e._v(" 重置密码 ")]),a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.delete,expression:"apiObj.delete"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.$refs.theCURD.delete(t.row)}}},[e._v(" 删除 ")])]}}])})],1)},n=[],o=a("c7b2"),i=function(e){return o["a"].get("/account/s",{params:e})},c=function(e){return o["a"].get("/account",{params:e})},u=function(e){return o["a"].post("/account",e)},l=function(e){return o["a"].put("/account",e)},s=function(e){return o["a"].delete("/account",{params:e})},d=function(e){return o["a"].put("/account/reset",e)},m=a("2127"),f={data:function(){var e=this,t=function(t,a,r){a?(a&&t.checkPass&&e.$refs.theCURD.form.validateField("checkPass"),r()):r(new Error("请输入密码"))},a=function(e,t,a){t?t!==e.password?a(new Error("两次输入密码不一致!")):a():a(new Error("请再次输入密码"))};return{apiObj:{list:i,detail:c,create:u,update:l,delete:s,resetPassword:d},loading:!1,model:{accountName:{label:"用户名",required:!0},accountNumber:{label:"账号",required:!0},password:{label:"密码",required:!0,scope:"create",validator:t},checkPass:{label:"确认密码",required:!0,scope:"create",validator:a},orgId:{type:"number",label:"所属组织",required:!0,control:"OrgPicker",controlOption:{adapter:function(t,a){return a&&a.id?a.fullName:e.$refs.theCURD.editForm.sysOrg?e.$refs.theCURD.editForm.sysOrg.fullName:t}},asynValid:!0},roleId:{type:"number",label:"角色",required:!0,control:"DictSelect",controlOption:{load:this.loadRole,labelKey:"name"}},state:{type:"number",default:1,label:"状态",required:!0,control:"el-switch",controlOption:{"active-text":"启用","inactive-text":"禁用","active-value":1,"inactive-value":0}}},columns:[{label:"账号",prop:"accountNumber",width:150},{label:"用户名",prop:"accountName",width:150},{label:"角色",formatter:function(e){return e.roleName?"".concat(e.belongOrgName," - ").concat(e.roleName):"无"}},{label:"状态",width:80,slotName:"status"},{label:"操作",width:260,slotName:"action"}],queryParam:{name:""}}},methods:{handleLoading:function(e){console.log(e),this.loading=e},resetPassword:function(e){var t=this;if(!e)return null;this.$confirm("确定重置账号 ".concat(e.accountNumber," 的密码?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,d({id:e.id}).then((function(){t.fetchData(),t.$alert("密码已重置！",{confirmButtonText:"我知道了"})})).catch((function(){t.loading=!1}))})).catch((function(){}))},loadRole:function(){return Object(m["d"])().then((function(e){return e.data.data}))}}},p=f,b=a("2877"),h=Object(b["a"])(p,r,n,!1,null,"707a7d83",null);t["default"]=h.exports}}]);