import{n as _}from"./index.ec256302.js";import"./ui.c0058d49.js";const w="bd-map",P="PxyAUL3q2WMUP6s0ol4PGvVsUbrAG7PG",x={name:w,AK:P};let s;const I=(a,e)=>{if(!(a&&a.split))return console.warn("\u7F3A\u5C11\u53C2\u6570\uFF1Aak");const t="bdmap-sdk-by-widget-bmap";if(document.getElementById(t)||s||window.BMap)s=window.BMap,e(s);else{const n=`initialize_${parseInt(Math.random()*1e8)}`;window[n]=()=>{typeof e=="function"&&(s=window.BMap,e(s))};const r=document.createElement("script");r.id=t,r.src=`//api.map.baidu.com/api?v=3.0&ak=${a}&callback=${n}`,document.body.appendChild(r)}},M=(a,e,t)=>{if(!s)return null;if(typeof e=="function"&&(t=e,e=1),Array.isArray(a)){const n=a.map(l=>new s.Point(l.lng,l.lat));new s.Convertor().translate(n,e,5,t)}},S=function(a,e,t){const n={};return new Promise((r,l)=>{if(!a||!e)return l("mapSearch(): \u7F3A\u5C11\u53C2\u6570");const o=new s.LocalSearch(a,{pageCapacity:50,onSearchComplete:function(d){const f=Array.isArray(e)?e:[e],v=Array.isArray(d)?d:[d],g=f.map((m,b)=>new Promise(y=>{const c=v[b],C=c.getNumPages(),h=c.getPageIndex();for(let u=0;u<c.getCurrentNumPois();u++){const p=c.getPoi(u);p.uid&&!n[p.uid]&&(n[p.uid]=p)}h<C-1?o.gotoPage(h+1):y(n,o)}));Promise.all(g).then(()=>{r(Object.keys(n).map(m=>n[m]))})}});t?o.searchNearby(e,a,t):o.search(e)})};let i;const k={props:{center:{type:Object,required:!1,default(){return{lng:121.491,lat:31.233}}},zoomLevel:{type:Number,required:!1,default:14}},data(){return{mapId:`BMap_${parseInt(Math.random()*1e8)}`,loading:!1,map:null,marker:null,searchResults:[],currentItem:null}},watch:{center:{handler(){this.center&&this.center.lng&&this.center.lat&&this.handleCenter(this.center,this.handleSearch)},deep:!0}},methods:{handleClick(a){this.currentItem=a,this.setMaker(a.point),this.$emit("change",a)},setMaker(a){this.marker&&(this.map.removeOverlay(this.marker),this.marker=null),this.marker=new i.Marker(new i.Point(a.lng,a.lat)),this.map.addOverlay(this.marker),this.map.panTo(a)},handleCenter(a,e){M([a],t=>{t.status===0&&(console.log("\u8F6C\u6362\u5B8C\u6210",t.points),this.map.centerAndZoom(new i.Point(t.points[0].lng,t.points[0].lat),this.zoomLevel),this.setMaker(t.points[0]),typeof e=="function"&&e(t.points[0]))})},handleSearch(a){if(this.loading)return null;this.loading=!0,S(a,["\u666F\u70B9"]).then(e=>{this.searchResults=e,this.loading=!1})}},mounted(){I(x.AK,a=>{i=a,this.map=new i.Map(this.mapId),this.center&&this.center.lng&&this.center.lat&&this.handleCenter(this.center,this.handleSearch)})}};var A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-col"},[t("div",{staticClass:"bmap flex-1",attrs:{id:e.mapId}}),e._m(0),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"flex-1 scrollbar list"},e._l(e.searchResults,function(n,r){return t("div",{key:r,staticClass:"_item flex-row align-center",class:{cur:e.currentItem&&e.currentItem.uid===n.uid},on:{click:function(l){return e.handleClick(n)}}},[t("div",{staticClass:"flex-1"},[t("div",{staticClass:"_title el"},[e._v(" "+e._s(n.title)+" ")]),t("div",{staticClass:"el"},[e._v(" "+e._s(n.address)+" ")])]),t("div",{staticClass:"_check"})])}),0)])},$=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"titleBar"},[e("i",{staticClass:"el-icon-location _icon"}),a._v(" \u9009\u62E9\u5730\u70B9 ")])}],B=_(k,A,$,!1,null,"12d3586f",null,null);const O=B.exports;const z={components:{Search:O},data(){return{editForm:{album:""},props:[{name:"value",desc:"\u56FE\u7247\u6570\u636E\uFF0C\u5FC5\u987B\u542B\u6709url\u5B57\u6BB5",type:"Object",options:"-",default:"-"},{name:"placeholder",desc:"\u4E0A\u4F20\u5360\u4F4D\u6587\u5B57",type:"String",options:"-",default:"\u4E0A\u4F20"}],events:[{name:"change",desc:"\u4E0A\u4F20\u56FE\u7247\u6210\u529F\u4E8B\u4EF6",param:"file[Object]"}]}},methods:{},created(){}};var N=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("\u7B80\u4ECB")]),t("p",[e._v("\u5730\u56FE\u641C\u7D22\u7EC4\u4EF6\u3002")]),t("h2",[e._v("\u793A\u4F8B")]),t("div",{staticClass:"demo"},[t("Search",{staticStyle:{height:"600px"}})],1),e._m(0),t("h2",[e._v("\u914D\u7F6E")]),t("el-table",{attrs:{data:e.props}},[t("el-table-column",{attrs:{prop:"name",label:"\u5C5E\u6027"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"type",label:"\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"options",label:"\u53EF\u9009"}}),t("el-table-column",{attrs:{prop:"default",label:"\u9ED8\u8BA4"}})],1),t("h2",[e._v("\u4E8B\u4EF6")]),t("el-table",{attrs:{data:e.events}},[t("el-table-column",{attrs:{prop:"name",label:"\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"param",label:"\u53C2\u6570"}})],1)],1)},R=[function(){var a=this,e=a._self._c;return e("pre",{staticClass:"code"},[a._v("      "),e("textarea",{attrs:{readonly:"",rows:"6"}},[a._v(`      <Search style="height: 600px" />
      `)]),a._v(`
  `)])}],j=_(z,N,R,!1,null,"094f98ea",null,null);const q=j.exports;export{q as default};
