import{aJ as I,B as x,a1 as R,bq as bt,br as vt,l as Ct,U as Dt,bs as _t,bt as It,bu as Mt,J as O,bv as Lt,bw as Tt,m as Y,bx as Ot,_ as D,C as ht,by as Et,bz as T,bA as wt,bB as Gt,bC as Pt,am as zt,bD as Rt,aG as j,aK as K,bm as Vt,a2 as yt,aW as G,a9 as Bt,aX as kt,R as mt,o as F,G as H,O as V,bE as Nt,aL as J,b as Xt,V as W,bF as q,c as Yt,bG as Ft,bH as Ht,A as gt,M as Zt,j as $t,x as dt,aM as Ut,bI as jt,w as Kt,i as Jt,t as Wt,p as qt,bJ as Q,bK as Qt,K as te,a7 as ee}from"./variate.eab112d8.js";import{e as re,O as ie,d as ae,f as ne,g as tt,h as et,j as oe,k as se,m as B,n as rt,o as le,A as ue,p as ce,q as fe,i as it,c as ve}from"./install.c68894ca.js";import{A as he,a as ye,b as me,c as ge}from"./axisAlignTicks.3421a2c0.js";var de=function(){function a(t){this.coordSysDims=[],this.axisMap=R(),this.categoryAxisMap=R(),this.coordSysName=t}return a}();function pe(a){var t=a.get("coordinateSystem"),e=new de(t),i=xe[t];if(i)return i(a,e,e.axisMap,e.categoryAxisMap),e}var xe={cartesian2d:function(a,t,e,i){var r=a.getReferringComponents("xAxis",I).models[0],n=a.getReferringComponents("yAxis",I).models[0];t.coordSysDims=["x","y"],e.set("x",r),e.set("y",n),M(r)&&(i.set("x",r),t.firstCategoryDimIndex=0),M(n)&&(i.set("y",n),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(a,t,e,i){var r=a.getReferringComponents("singleAxis",I).models[0];t.coordSysDims=["single"],e.set("single",r),M(r)&&(i.set("single",r),t.firstCategoryDimIndex=0)},polar:function(a,t,e,i){var r=a.getReferringComponents("polar",I).models[0],n=r.findAxisModel("radiusAxis"),s=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",n),e.set("angle",s),M(n)&&(i.set("radius",n),t.firstCategoryDimIndex=0),M(s)&&(i.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(a,t,e,i){t.coordSysDims=["lng","lat"]},parallel:function(a,t,e,i){var r=a.ecModel,n=r.getComponent("parallel",a.get("parallelIndex")),s=t.coordSysDims=n.dimensions.slice();x(n.parallelAxisIndex,function(o,u){var l=r.getComponent("parallelAxis",o),v=s[u];e.set(v,l),M(l)&&(i.set(v,l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=u))})}};function M(a){return a.get("type")==="category"}function Ae(a,t){var e=a.get("coordinateSystem"),i=Tt.get(e),r;return t&&t.coordSysDims&&(r=Y(t.coordSysDims,function(n){var s={name:n},o=t.axisMap.get(n);if(o){var u=o.get("type");s.type=Ot(u)}return s})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),r}function Se(a,t,e){var i,r;return e&&x(a,function(n,s){var o=n.coordDim,u=e.categoryAxisMap.get(o);u&&(i==null&&(i=s),n.ordinalMeta=u.getOrdinalMeta(),t&&(n.createInvertedIndices=!0)),n.otherDims.itemName!=null&&(r=!0)}),!r&&i!=null&&(a[i].otherDims.itemName=0),i}function qe(a,t,e){e=e||{};var i=t.getSourceManager(),r,n=!1;a?(n=!0,r=bt(a)):(r=i.getSource(),n=r.sourceFormat===vt);var s=pe(t),o=Ae(t,s),u=e.useEncodeDefaulter,l=Ct(u)?u:u?Dt(_t,o,t):null,v={coordDimensions:o,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!n},c=It(r,v),h=Se(c.dimensions,e.createInvertedIndices,s),f=n?null:i.getSharedDataStore(c),y=re(t,{schema:c,store:f}),m=new Mt(c,t);m.setCalculationInfo(y);var g=h!=null&&be(r)?function(p,A,d,b){return b===h?d:this.defaultDimValueGetter(p,A,d,b)}:null;return m.hasItemOption=!1,m.initData(n?r:f,null,g),m}function be(a){if(a.sourceFormat===vt){var t=Ce(a.data||[]);return!O(Lt(t))}}function Ce(a){for(var t=0;t<a.length&&a[t]==null;)t++;return a[t]}var De=function(a){D(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(ht),_e=De,k=function(a){D(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",I).models[0]},t.type="cartesian2dAxis",t}(ht);Et(k,he);var Ie={value:1,category:1,time:1,log:1};function at(a,t,e,i){x(Ie,function(r,n){var s=T(T({},ye[n],!0),i,!0),o=function(u){D(l,u);function l(){var v=u!==null&&u.apply(this,arguments)||this;return v.type=t+"Axis."+n,v}return l.prototype.mergeDefaultAndTheme=function(v,c){var h=wt(this),f=h?Gt(v):{},y=c.getTheme();T(v,y.get(n+"Axis")),T(v,this.getDefaultOption()),v.type=nt(v),h&&Pt(v,f,h)},l.prototype.optionUpdated=function(){var v=this.option;v.type==="category"&&(this.__ordinalMeta=ie.createByAxisModel(this))},l.prototype.getCategories=function(v){var c=this.option;if(c.type==="category")return v?c.data:this.__ordinalMeta.categories},l.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},l.type=t+"Axis."+n,l.defaultOption=s,l}(e);a.registerComponentModel(o)}),a.registerSubTypeDefaulter(t+"Axis",nt)}function nt(a){return a.type||(a.data?"category":"value")}var Me=function(){function a(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return a.prototype.getAxis=function(t){return this._axes[t]},a.prototype.getAxes=function(){return Y(this._dimList,function(t){return this._axes[t]},this)},a.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),zt(this.getAxes(),function(e){return e.scale.type===t})},a.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},a}(),Le=Me,N=["x","y"];function ot(a){return a.type==="interval"||a.type==="time"}var Te=function(a){D(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=N,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!ot(e)||!ot(i))){var r=e.getExtent(),n=i.getExtent(),s=this.dataToPoint([r[0],n[0]]),o=this.dataToPoint([r[1],n[1]]),u=r[1]-r[0],l=n[1]-n[0];if(!(!u||!l)){var v=(o[0]-s[0])/u,c=(o[1]-s[1])/l,h=s[0]-r[0]*v,f=s[1]-n[0]*c,y=this._transform=[v,0,0,c,h,f];this._invTransform=Rt([],y)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var i=this.getAxis("x"),r=this.getAxis("y");return i.contain(i.toLocalCoord(e[0]))&&r.contain(r.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,i){var r=this.dataToPoint(e),n=this.dataToPoint(i),s=this.getArea(),o=new j(r[0],r[1],n[0]-r[0],n[1]-r[1]);return s.intersect(o)},t.prototype.dataToPoint=function(e,i,r){r=r||[];var n=e[0],s=e[1];if(this._transform&&n!=null&&isFinite(n)&&s!=null&&isFinite(s))return K(r,e,this._transform);var o=this.getAxis("x"),u=this.getAxis("y");return r[0]=o.toGlobalCoord(o.dataToCoord(n,i)),r[1]=u.toGlobalCoord(u.dataToCoord(s,i)),r},t.prototype.clampData=function(e,i){var r=this.getAxis("x").scale,n=this.getAxis("y").scale,s=r.getExtent(),o=n.getExtent(),u=r.parse(e[0]),l=n.parse(e[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),i[1]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),i},t.prototype.pointToData=function(e,i){var r=[];if(this._invTransform)return K(r,e,this._invTransform);var n=this.getAxis("x"),s=this.getAxis("y");return r[0]=n.coordToData(n.toLocalCoord(e[0]),i),r[1]=s.coordToData(s.toLocalCoord(e[1]),i),r},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),r=Math.min(e[0],e[1]),n=Math.min(i[0],i[1]),s=Math.max(e[0],e[1])-r,o=Math.max(i[0],i[1])-n;return new j(r,n,s,o)},t}(Le),Oe=Te,Ee=function(a){D(t,a);function t(e,i,r,n,s){var o=a.call(this,e,i,r)||this;return o.index=0,o.type=n||"value",o.position=s||"bottom",o}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),e&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(e,i){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(me),we=Ee,Ge=function(){function a(t,e,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=N,this._initCartesian(t,e,i),this.model=t}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(t,e){var i=this._axesMap;this._updateScale(t,this.model);function r(s){var o,u=Bt(s),l=u.length;if(!!l){for(var v=[],c=l-1;c>=0;c--){var h=+u[c],f=s[h],y=f.model,m=f.scale;B(m)&&y.get("alignTicks")&&y.get("interval")==null?v.push(f):(rt(m,y),B(m)&&(o=f))}v.length&&(o||(o=v.pop(),rt(o.scale,o.model)),x(v,function(g){ge(g.scale,g.model,o.scale)}))}}r(i.x),r(i.y);var n={};x(i.x,function(s){st(i,"y",s,n)}),x(i.y,function(s){st(i,"x",s,n)}),this.resize(this.model,e)},a.prototype.resize=function(t,e,i){var r=t.getBoxLayoutParams(),n=!i&&t.get("containLabel"),s=Vt(r,{width:e.getWidth(),height:e.getHeight()});this._rect=s;var o=this._axesList;u(),n&&(x(o,function(l){if(!l.model.get(["axisLabel","inside"])){var v=ae(l);if(v){var c=l.isHorizontal()?"height":"width",h=l.model.get(["axisLabel","margin"]);s[c]-=v[c]+h,l.position==="top"?s.y+=v.height+h:l.position==="left"&&(s.x+=v.width+h)}}}),u()),x(this._coordsList,function(l){l.calcAffineTransform()});function u(){x(o,function(l){var v=l.isHorizontal(),c=v?[0,s.width]:[0,s.height],h=l.inverse?1:0;l.setExtent(c[h],c[1-h]),Pe(l,v?s.x:s.y)})}},a.prototype.getAxis=function(t,e){var i=this._axesMap[t];if(i!=null)return i[e||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var i="x"+t+"y"+e;return this._coordsMap[i]}yt(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var r=0,n=this._coordsList;r<n.length;r++)if(n[r].getAxis("x").index===t||n[r].getAxis("y").index===e)return n[r]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.dataToPoint(i):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(i)):null},a.prototype.convertFromPixel=function(t,e,i){var r=this._findConvertTarget(e);return r.cartesian?r.cartesian.pointToData(i):r.axis?r.axis.coordToData(r.axis.toLocalCoord(i)):null},a.prototype._findConvertTarget=function(t){var e=t.seriesModel,i=t.xAxisModel||e&&e.getReferringComponents("xAxis",I).models[0],r=t.yAxisModel||e&&e.getReferringComponents("yAxis",I).models[0],n=t.gridModel,s=this._coordsList,o,u;if(e)o=e.coordinateSystem,G(s,o)<0&&(o=null);else if(i&&r)o=this.getCartesian(i.componentIndex,r.componentIndex);else if(i)u=this.getAxis("x",i.componentIndex);else if(r)u=this.getAxis("y",r.componentIndex);else if(n){var l=n.coordinateSystem;l===this&&(o=this._coordsList[0])}return{cartesian:o,axis:u}},a.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},a.prototype._initCartesian=function(t,e,i){var r=this,n=this,s={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},u={x:0,y:0};if(e.eachComponent("xAxis",l("x"),this),e.eachComponent("yAxis",l("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,x(o.x,function(v,c){x(o.y,function(h,f){var y="x"+c+"y"+f,m=new Oe(y);m.master=r,m.model=t,r._coordsMap[y]=m,r._coordsList.push(m),m.addAxis(v),m.addAxis(h)})});function l(v){return function(c,h){if(!!P(c,t)){var f=c.get("position");v==="x"?f!=="top"&&f!=="bottom"&&(f=s.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=s.left?"right":"left"),s[f]=!0;var y=new we(v,ne(c),[0,0],c.get("type"),f),m=y.type==="category";y.onBand=m&&c.get("boundaryGap"),y.inverse=c.get("inverse"),c.axis=y,y.model=c,y.grid=n,y.index=h,n._axesList.push(y),o[v][h]=y,u[v]++}}}},a.prototype._updateScale=function(t,e){x(this._axesList,function(r){if(r.scale.setExtent(1/0,-1/0),r.type==="category"){var n=r.model.get("categorySortInfo");r.scale.setSortInfo(n)}}),t.eachSeries(function(r){if(tt(r)){var n=et(r),s=n.xAxisModel,o=n.yAxisModel;if(!P(s,e)||!P(o,e))return;var u=this.getCartesian(s.componentIndex,o.componentIndex),l=r.getData(),v=u.getAxis("x"),c=u.getAxis("y");i(l,v),i(l,c)}},this);function i(r,n){x(oe(r,n.dim),function(s){n.scale.unionExtentFromData(r,s)})}},a.prototype.getTooltipAxes=function(t){var e=[],i=[];return x(this.getCartesians(),function(r){var n=t!=null&&t!=="auto"?r.getAxis(t):r.getBaseAxis(),s=r.getOtherAxis(n);G(e,n)<0&&e.push(n),G(i,s)<0&&i.push(s)}),{baseAxes:e,otherAxes:i}},a.create=function(t,e){var i=[];return t.eachComponent("grid",function(r,n){var s=new a(r,t,e);s.name="grid_"+n,s.resize(r,e,!0),r.coordinateSystem=s,i.push(s)}),t.eachSeries(function(r){if(!!tt(r)){var n=et(r),s=n.xAxisModel,o=n.yAxisModel,u=s.getCoordSysModel(),l=u.coordinateSystem;r.coordinateSystem=l.getCartesian(s.componentIndex,o.componentIndex)}}),i},a.dimensions=N,a}();function P(a,t){return a.getCoordSysModel()===t}function st(a,t,e,i){e.getAxesOnZeroOf=function(){return n?[n]:[]};var r=a[t],n,s=e.model,o=s.get(["axisLine","onZero"]),u=s.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(u!=null)lt(r[u])&&(n=r[u]);else for(var l in r)if(r.hasOwnProperty(l)&&lt(r[l])&&!i[v(r[l])]){n=r[l];break}n&&(i[v(n)]=!0);function v(c){return c.dim+"_"+c.index}}function lt(a){return a&&a.type!=="category"&&a.type!=="time"&&se(a)}function Pe(a,t){var e=a.getExtent(),i=e[0]+e[1];a.toGlobalCoord=a.dim==="x"?function(r){return r+t}:function(r){return i-r+t},a.toLocalCoord=a.dim==="x"?function(r){return r-t}:function(r){return i-r+t}}var ze=Ge,X=kt();function Re(a,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var n=e.getModel("splitArea"),s=n.getModel("areaStyle"),o=s.get("color"),u=i.coordinateSystem.getRect(),l=r.getTicksCoords({tickModel:n,clamp:!0});if(!!l.length){var v=o.length,c=X(a).splitAreaColors,h=R(),f=0;if(c)for(var y=0;y<l.length;y++){var m=c.get(l[y].tickValue);if(m!=null){f=(m+(v-1)*y)%v;break}}var g=r.toGlobalCoord(l[0].coord),p=s.getAreaStyle();o=O(o)?o:[o];for(var y=1;y<l.length;y++){var A=r.toGlobalCoord(l[y].coord),d=void 0,b=void 0,S=void 0,C=void 0;r.isHorizontal()?(d=g,b=u.y,S=A-d,C=u.height,g=d+S):(d=u.x,b=g,S=u.width,C=A-b,g=b+C);var _=l[y-1].tickValue;_!=null&&h.set(_,f),t.add(new mt({anid:_!=null?"area_"+_:null,shape:{x:d,y:b,width:S,height:C},style:F({fill:o[f]},p),autoBatch:!0,silent:!0})),f=(f+1)%v}X(a).splitAreaColors=h}}}function Ve(a){X(a).splitAreaColors=null}var Be=["axisLine","axisTickLabel","axisName"],ke=["splitArea","splitLine","minorSplitLine"],pt=function(a){D(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,i,r,n){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new H,this.group.add(this._axisGroup),!!e.get("show")){var o=e.getCoordSysModel(),u=le(o,e),l=new ue(e,V({handleAutoShown:function(c){for(var h=o.coordinateSystem.getCartesians(),f=0;f<h.length;f++)if(B(h[f].getOtherAxis(e.axis).scale))return!0;return!1}},u));x(Be,l.add,l),this._axisGroup.add(l.getGroup()),x(ke,function(c){e.get([c,"show"])&&Ne[c](this,this._axisGroup,e,o)},this);var v=n&&n.type==="changeAxisOrder"&&n.isInitSort;v||Nt(s,this._axisGroup,e),a.prototype.render.call(this,e,i,r,n)}},t.prototype.remove=function(){Ve(this)},t.type="cartesianAxis",t}(ce),Ne={splitLine:function(a,t,e,i){var r=e.axis;if(!r.scale.isBlank()){var n=e.getModel("splitLine"),s=n.getModel("lineStyle"),o=s.get("color");o=O(o)?o:[o];for(var u=i.coordinateSystem.getRect(),l=r.isHorizontal(),v=0,c=r.getTicksCoords({tickModel:n}),h=[],f=[],y=s.getLineStyle(),m=0;m<c.length;m++){var g=r.toGlobalCoord(c[m].coord);l?(h[0]=g,h[1]=u.y,f[0]=g,f[1]=u.y+u.height):(h[0]=u.x,h[1]=g,f[0]=u.x+u.width,f[1]=g);var p=v++%o.length,A=c[m].tickValue;t.add(new J({anid:A!=null?"line_"+c[m].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:F({stroke:o[p]},y),silent:!0}))}}},minorSplitLine:function(a,t,e,i){var r=e.axis,n=e.getModel("minorSplitLine"),s=n.getModel("lineStyle"),o=i.coordinateSystem.getRect(),u=r.isHorizontal(),l=r.getMinorTicksCoords();if(!!l.length)for(var v=[],c=[],h=s.getLineStyle(),f=0;f<l.length;f++)for(var y=0;y<l[f].length;y++){var m=r.toGlobalCoord(l[f][y].coord);u?(v[0]=m,v[1]=o.y,c[0]=m,c[1]=o.y+o.height):(v[0]=o.x,v[1]=m,c[0]=o.x+o.width,c[1]=m),t.add(new J({anid:"minor_line_"+l[f][y].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:c[0],y2:c[1]},style:h,silent:!0}))}},splitArea:function(a,t,e,i){Re(a,t,e,i)}},xt=function(a){D(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(pt),Xe=function(a){D(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=xt.type,e}return t.type="yAxis",t}(pt),Ye=function(a){D(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,i){this.group.removeAll(),e.get("show")&&this.group.add(new mt({shape:e.coordinateSystem.getRect(),style:F({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Xt),ut={offset:0};function Fe(a){a.registerComponentView(Ye),a.registerComponentModel(_e),a.registerCoordinateSystem("cartesian2d",ze),at(a,"x",k,ut),at(a,"y",k,ut),a.registerComponentView(xt),a.registerComponentView(Xe),a.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Qe(a){W(Fe),W(fe)}function He(a,t){var e=a.mapDimensionsAll("defaultedLabel"),i=e.length;if(i===1){var r=q(a,t,e[0]);return r!=null?r+"":null}else if(i){for(var n=[],s=0;s<e.length;s++)n.push(q(a,t,e[s]));return n.join(" ")}}function tr(a,t){var e=a.mapDimensionsAll("defaultedLabel");if(!O(t))return t+"";for(var i=[],r=0;r<e.length;r++){var n=a.getDimensionIndex(e[r]);n>=0&&i.push(t[n])}return i.join(" ")}var Ze=function(a){D(t,a);function t(e,i,r,n){var s=a.call(this)||this;return s.updateData(e,i,r,n),s}return t.prototype._createSymbol=function(e,i,r,n,s){this.removeAll();var o=Yt(e,-1,-1,2,2,null,s);o.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),o.drift=$e,this._symbolType=e,this.add(o)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Ft(this.childAt(0))},t.prototype.downplay=function(){Ht(this.childAt(0))},t.prototype.setZ=function(e,i){var r=this.childAt(0);r.zlevel=e,r.z=i},t.prototype.setDraggable=function(e,i){var r=this.childAt(0);r.draggable=e,r.cursor=!i&&e?"move":r.cursor},t.prototype.updateData=function(e,i,r,n){this.silent=!1;var s=e.getItemVisual(i,"symbol")||"circle",o=e.hostModel,u=t.getSymbolSize(e,i),l=s!==this._symbolType,v=n&&n.disableAnimation;if(l){var c=e.getItemVisual(i,"symbolKeepAspect");this._createSymbol(s,e,i,u,c)}else{var h=this.childAt(0);h.silent=!1;var f={scaleX:u[0]/2,scaleY:u[1]/2};v?h.attr(f):gt(h,f,o,i),Zt(h)}if(this._updateCommon(e,i,u,r,n),l){var h=this.childAt(0);if(!v){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,$t(h,f,o,i)}}v&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,i,r,n,s){var o=this.childAt(0),u=e.hostModel,l,v,c,h,f,y,m,g,p;if(n&&(l=n.emphasisItemStyle,v=n.blurItemStyle,c=n.selectItemStyle,h=n.focus,f=n.blurScope,m=n.labelStatesModels,g=n.hoverScale,p=n.cursorStyle,y=n.emphasisDisabled),!n||e.hasItemOption){var A=n&&n.itemModel?n.itemModel:e.getItemModel(i),d=A.getModel("emphasis");l=d.getModel("itemStyle").getItemStyle(),c=A.getModel(["select","itemStyle"]).getItemStyle(),v=A.getModel(["blur","itemStyle"]).getItemStyle(),h=d.get("focus"),f=d.get("blurScope"),y=d.get("disabled"),m=dt(A),g=d.getShallow("scale"),p=A.getShallow("cursor")}var b=e.getItemVisual(i,"symbolRotate");o.attr("rotation",(b||0)*Math.PI/180||0);var S=Ut(e.getItemVisual(i,"symbolOffset"),r);S&&(o.x=S[0],o.y=S[1]),p&&o.attr("cursor",p);var C=e.getItemVisual(i,"style"),_=C.fill;if(o instanceof jt){var L=o.style;o.useStyle(V({image:L.image,x:L.x,y:L.y,width:L.width,height:L.height},C))}else o.__isEmptyBrush?o.useStyle(V({},C)):o.useStyle(C),o.style.decal=null,o.setColor(_,s&&s.symbolInnerColor),o.style.strokeNoScale=!0;var Z=e.getItemVisual(i,"liftZ"),E=this._z2;Z!=null?E==null&&(this._z2=o.z2,o.z2+=Z):E!=null&&(o.z2=E,this._z2=null);var At=s&&s.useNameLabel;Kt(o,m,{labelFetcher:u,labelDataIndex:i,defaultText:St,inheritColor:_,defaultOpacity:C.opacity});function St(U){return At?e.getName(U):He(e,U)}this._sizeX=r[0]/2,this._sizeY=r[1]/2;var w=o.ensureState("emphasis");if(w.style=l,o.ensureState("select").style=c,o.ensureState("blur").style=v,g){var $=Math.max(Jt(g)?g:1.1,3/this._sizeY);w.scaleX=this._sizeX*$,w.scaleY=this._sizeY*$}this.setSymbolScale(1),Wt(this,h,f,y)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,i,r){var n=this.childAt(0),s=qt(this).dataIndex,o=r&&r.animation;if(this.silent=n.silent=!0,r&&r.fadeLabel){var u=n.getTextContent();u&&Q(u,{style:{opacity:0}},i,{dataIndex:s,removeOpt:o,cb:function(){n.removeTextContent()}})}else n.removeTextContent();Q(n,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:s,cb:e,removeOpt:o})},t.getSymbolSize=function(e,i){return Qt(e.getItemVisual(i,"symbolSize"))},t}(H);function $e(a,t){this.parent.drift(a,t)}var Ue=Ze;function z(a,t,e,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(e))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&a.getItemVisual(e,"symbol")!=="none"}function ct(a){return a!=null&&!yt(a)&&(a={isIgnore:a}),a||{}}function ft(a){var t=a.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:dt(t),cursorStyle:t.get("cursor")}}var je=function(){function a(t){this.group=new H,this._SymbolCtor=t||Ue}return a.prototype.updateData=function(t,e){this._progressiveEls=null,e=ct(e);var i=this.group,r=t.hostModel,n=this._data,s=this._SymbolCtor,o=e.disableAnimation,u=ft(t),l={disableAnimation:o},v=e.getSymbolPoint||function(c){return t.getItemLayout(c)};n||i.removeAll(),t.diff(n).add(function(c){var h=v(c);if(z(t,h,c,e)){var f=new s(t,c,u,l);f.setPosition(h),t.setItemGraphicEl(c,f),i.add(f)}}).update(function(c,h){var f=n.getItemGraphicEl(h),y=v(c);if(!z(t,y,c,e)){i.remove(f);return}var m=t.getItemVisual(c,"symbol")||"circle",g=f&&f.getSymbolType&&f.getSymbolType();if(!f||g&&g!==m)i.remove(f),f=new s(t,c,u,l),f.setPosition(y);else{f.updateData(t,c,u,l);var p={x:y[0],y:y[1]};o?f.attr(p):gt(f,p,r)}i.add(f),t.setItemGraphicEl(c,f)}).remove(function(c){var h=n.getItemGraphicEl(c);h&&h.fadeOut(function(){i.remove(h)},r)}).execute(),this._getSymbolPoint=v,this._data=t},a.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(i,r){var n=t._getSymbolPoint(r);i.setPosition(n),i.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=ft(t),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(t,e,i){this._progressiveEls=[],i=ct(i);function r(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var s=e.getItemLayout(n);if(z(e,s,n,i)){var o=new this._SymbolCtor(e,n,this._seriesScope);o.traverse(r),o.setPosition(s),this.group.add(o),e.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},a.prototype.eachRendered=function(t){te(this._progressiveEls||this.group,t)},a.prototype.remove=function(t){var e=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(r){r.fadeOut(function(){e.remove(r)},i.hostModel)}):e.removeAll()},a}(),er=je;function rr(a,t){return{seriesType:a,plan:ee(),reset:function(e){var i=e.getData(),r=e.coordinateSystem,n=e.pipelineContext,s=t||n.large;if(!!r){var o=Y(r.dimensions,function(f){return i.mapDimension(f)}).slice(0,2),u=o.length,l=i.getCalculationInfo("stackResultDimension");it(i,o[0])&&(o[0]=l),it(i,o[1])&&(o[1]=l);var v=i.getStore(),c=i.getDimensionIndex(o[0]),h=i.getDimensionIndex(o[1]);return u&&{progress:function(f,y){for(var m=f.end-f.start,g=s&&ve(m*u),p=[],A=[],d=f.start,b=0;d<f.end;d++){var S=void 0;if(u===1){var C=v.get(c,d);S=r.dataToPoint(C,null,A)}else p[0]=v.get(c,d),p[1]=v.get(h,d),S=r.dataToPoint(p,null,A);s?(g[b++]=S[0],g[b++]=S[1]):y.setItemLayout(d,S.slice())}s&&y.setLayout("points",g)}}}}}}export{er as S,Ue as a,He as b,qe as c,Fe as d,tr as g,Qe as i,rr as p};
