import{n as f}from"./index.208c0d27.js";import"./ui.9b8b7178.js";const w="bd-map",S="PxyAUL3q2WMUP6s0ol4PGvVsUbrAG7PG";var k={name:w,AK:S};let r;const P=(e,a)=>{if(!(e&&e.split))return console.warn("\u7F3A\u5C11\u53C2\u6570\uFF1Aak");const t="bdmap-sdk-by-widget-bmap";if(document.getElementById(t)||r||window.BMap)r=window.BMap,a(r);else{const n=`initialize_${parseInt(Math.random()*1e8)}`;window[n]=()=>{typeof a=="function"&&(r=window.BMap,a(r))};const s=document.createElement("script");s.id=t,s.src=`//api.map.baidu.com/api?v=3.0&ak=${e}&callback=${n}`,document.body.appendChild(s)}},z=(e,a,t)=>{if(!r)return null;if(typeof a=="function"&&(t=a,a=1),Array.isArray(e)){const n=e.map(i=>new r.Point(i.lng,i.lat));new r.Convertor().translate(n,a,5,t)}},B=function(e,a,t){const n={};return new Promise((s,i)=>{if(!e||!a)return i("mapSearch(): \u7F3A\u5C11\u53C2\u6570");const o=new r.LocalSearch(e,{pageCapacity:50,onSearchComplete:function(p){const b=Array.isArray(a)?a:[a],g=Array.isArray(p)?p:[p],A=b.map((m,y)=>new Promise(x=>{const c=g[y],C=c.getNumPages(),h=c.getPageIndex();for(let u=0;u<c.getCurrentNumPois();u++){const d=c.getPoi(u);d.uid&&!n[d.uid]&&(n[d.uid]=d)}h<C-1?o.gotoPage(h+1):x(n,o)}));Promise.all(A).then(()=>{s(Object.keys(n).map(m=>n[m]))})}});t?o.searchNearby(a,e,t):o.search(a)})};var E=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"flex-col"},[t("div",{staticClass:"bmap flex-1",attrs:{id:e.mapId}}),e._m(0),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"flex-1 scrollbar list"},e._l(e.searchResults,function(n,s){return t("div",{key:s,staticClass:"_item flex-row align-center",class:{cur:e.currentItem&&e.currentItem.uid===n.uid},on:{click:function(i){return e.handleClick(n)}}},[t("div",{staticClass:"flex-1"},[t("div",{staticClass:"_title el"},[e._v(" "+e._s(n.title)+" ")]),t("div",{staticClass:"el"},[e._v(" "+e._s(n.address)+" ")])]),t("div",{staticClass:"_check"})])}),0)])},M=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"titleBar"},[t("i",{staticClass:"el-icon-location _icon"}),e._v(" \u9009\u62E9\u5730\u70B9 ")])}];let l;const I={props:{center:{type:Object,required:!1,default(){return{lng:121.491,lat:31.233}}},zoomLevel:{type:Number,required:!1,default:14}},data(){return{mapId:`BMap_${parseInt(Math.random()*1e8)}`,loading:!1,map:null,marker:null,searchResults:[],currentItem:null}},watch:{center:{handler(){this.center&&this.center.lng&&this.center.lat&&this.handleCenter(this.center,this.handleSearch)},deep:!0}},methods:{handleClick(e){this.currentItem=e,this.setMaker(e.point),this.$emit("change",e)},setMaker(e){this.marker&&(this.map.removeOverlay(this.marker),this.marker=null),this.marker=new l.Marker(new l.Point(e.lng,e.lat)),this.map.addOverlay(this.marker),this.map.panTo(e)},handleCenter(e,a){z([e],t=>{t.status===0&&(console.log("\u8F6C\u6362\u5B8C\u6210",t.points),this.map.centerAndZoom(new l.Point(t.points[0].lng,t.points[0].lat),this.zoomLevel),this.setMaker(t.points[0]),typeof a=="function"&&a(t.points[0]))})},handleSearch(e){if(this.loading)return null;this.loading=!0,B(e,["\u666F\u70B9"]).then(a=>{this.searchResults=a,this.loading=!1})}},mounted(){P(k.AK,e=>{l=e,this.map=new l.Map(this.mapId),this.center&&this.center.lng&&this.center.lat&&this.handleCenter(this.center,this.handleSearch)})}},v={};var Y=f(I,E,M,!1,j,"0b78d1e4",null,null);function j(e){for(let a in v)this[a]=v[a]}var $=function(){return Y.exports}(),F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("h2",[e._v("\u7B80\u4ECB")]),t("p",[e._v("\u5730\u56FE\u641C\u7D22\u7EC4\u4EF6\u3002")]),t("h2",[e._v("\u793A\u4F8B")]),t("div",{staticClass:"demo"},[t("Search",{staticStyle:{height:"600px"}})],1),e._m(0),t("h2",[e._v("\u914D\u7F6E")]),t("el-table",{attrs:{data:e.props}},[t("el-table-column",{attrs:{prop:"name",label:"\u5C5E\u6027"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"type",label:"\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"options",label:"\u53EF\u9009"}}),t("el-table-column",{attrs:{prop:"default",label:"\u9ED8\u8BA4"}})],1),t("h2",[e._v("\u4E8B\u4EF6")]),t("el-table",{attrs:{data:e.events}},[t("el-table-column",{attrs:{prop:"name",label:"\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"param",label:"\u53C2\u6570"}})],1)],1)},q=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("pre",{staticClass:"code"},[e._v("      "),t("textarea",{attrs:{readonly:"",rows:"6"}},[e._v(`      <Search style="height: 600px" />
      `)]),e._v(`
  `)])}];const G={components:{Search:$},data(){return{editForm:{album:""},props:[{name:"value",desc:"\u56FE\u7247\u6570\u636E\uFF0C\u5FC5\u987B\u542B\u6709url\u5B57\u6BB5",type:"Object",options:"-",default:"-"},{name:"placeholder",desc:"\u4E0A\u4F20\u5360\u4F4D\u6587\u5B57",type:"String",options:"-",default:"\u4E0A\u4F20"}],events:[{name:"change",desc:"\u4E0A\u4F20\u56FE\u7247\u6210\u529F\u4E8B\u4EF6",param:"file[Object]"}]}},methods:{},created(){}},_={};var O=f(G,F,q,!1,Q,"0603118d",null,null);function Q(e){for(let a in _)this[a]=_[a]}var U=function(){return O.exports}();export{U as default};
