import{i,n}from"./index.dd498c01.js";import"./ui.9b8b7178.js";const l=(e,a)=>i.put("/updatePassword",e,a);var u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}]},[t("ToolBar"),t("el-form",{ref:"form",staticClass:"wrap",attrs:{model:e.formData,"status-icon":"",rules:e.rules,"label-width":"100px"},nativeOn:{submit:function(s){return s.preventDefault(),e.submitForm.apply(null,arguments)}}},[e.formData.token?e._e():t("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"\u672A\u9A8C\u8BC1\u7528\u6237\u8EAB\u4EFD\uFF0C\u8BF7\u8FD4\u56DE\u91CD\u8BD5\uFF01",type:"error","show-icon":"",closable:!1}}),t("el-form-item",{attrs:{label:"\u65B0\u5BC6\u7801",prop:"newPassword"}},[t("input-password",{attrs:{autocomplete:"off"},model:{value:e.formData.newPassword,callback:function(s){e.$set(e.formData,"newPassword",s)},expression:"formData.newPassword"}})],1),t("el-form-item",{attrs:{label:"\u786E\u8BA4\u5BC6\u7801",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.formData.checkPass,callback:function(s){e.$set(e.formData,"checkPass",s)},expression:"formData.checkPass"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("\u63D0\u4EA4")])],1)],1)],1)},c=[];const m={data(){return{loading:!1,formData:{token:"",checkPass:"",newPassword:""},rules:{newPassword:[{validator:(t,s,r)=>{s===""?r(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801")):(this.formData.checkPass!==""&&this.$refs.form.validateField("checkPass"),r())},trigger:"blur"},{min:6,max:30,message:"\u957F\u5EA6\u5728 6 \u5230 30 \u4E2A\u5B57\u7B26",trigger:"blur"}],checkPass:[{validator:(t,s,r)=>{s===""?r(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")):s!==this.formData.newPassword?r(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!")):r()},trigger:"blur"}]}}},methods:{submitForm(){this.$refs.form.validate(e=>{if(e){this.loading=!0;let a=Object.assign({},this.formData);delete a.checkPass,l(a).then(()=>{this.loading=!1,this.$alert("\u5BC6\u7801\u4FEE\u6539\u6210\u529F",{callback:()=>{this.$router.go(-1)}})}).catch(()=>{this.loading=!1})}})}},created:function(){this.$route.query.authCode&&(this.formData.token=this.$route.query.authCode)}},o={};var d=n(m,u,c,!1,f,"84322940",null,null);function f(e){for(let a in o)this[a]=o[a]}var v=function(){return d.exports}();export{v as default};
