import{_ as v,e as D,aG as b,P as x,G as C,c as A,p as I,u as L,V as g,W as M,X as $,Y as z}from"./variate.eab112d8.js";import{n as m}from"./index.208c0d27.js";import{c as P,p as S,S as T,d as R,i as O}from"./points.cfa6b56f.js";import{b as V,g as B}from"./index.a6b0e2f1.js";import"./ui.9b8b7178.js";import"./axisAlignTicks.c2173ede.js";var j=function(a){v(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return P(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,r,n){return n.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(D),N=j,w=4,q=function(){function a(){}return a}(),F=function(a){v(e,a);function e(t){var r=a.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new q},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var n=r.points,o=r.size,i=this.symbolProxy,l=i.shape,h=t.getContext?t.getContext():t,s=h&&o[0]<w,p=this.softClipShape,u;if(s){this._ctx=h;return}for(this._ctx=null,u=this._off;u<n.length;){var c=n[u++],d=n[u++];isNaN(c)||isNaN(d)||p&&!p.contain(c,d)||(l.x=c-o[0]/2,l.y=d-o[1]/2,l.width=o[0],l.height=o[1],i.buildPath(t,l,!0))}this.incremental&&(this._off=u,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,n=t.size,o=this._ctx,i=this.softClipShape,l;if(!!o){for(l=this._off;l<r.length;){var h=r[l++],s=r[l++];isNaN(h)||isNaN(s)||i&&!i.contain(h,s)||o.fillRect(h-n[0]/2,s-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var n=this.shape,o=n.points,i=n.size,l=Math.max(i[0],4),h=Math.max(i[1],4),s=o.length/2-1;s>=0;s--){var p=s*2,u=o[p]-l/2,c=o[p+1]-h/2;if(t>=u&&r>=c&&t<=u+l&&r<=c+h)return s}return-1},e.prototype.contain=function(t,r){var n=this.transformCoordToLocal(t,r),o=this.getBoundingRect();if(t=n[0],r=n[1],o.contain(t,r)){var i=this.hoverDataIdx=this.findDataIndex(t,r);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,n=r.points,o=r.size,i=o[0],l=o[1],h=1/0,s=1/0,p=-1/0,u=-1/0,c=0;c<n.length;){var d=n[c++],f=n[c++];h=Math.min(d,h),p=Math.max(d,p),s=Math.min(f,s),u=Math.max(f,u)}t=this._rect=new b(h-i/2,s-l/2,p-h+i,u-s+l)}return t},e}(x),G=function(){function a(){this.group=new C}return a.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},a.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,o=r.startIndex*4*2;t=new Float32Array(t.buffer,o,n)}r.setShape("points",t),r.reset()})},a.prototype.incrementalPrepareUpdate=function(e){this._clear()},a.prototype.incrementalUpdate=function(e,t,r){var n=this._newAdded[0],o=t.getLayout("points"),i=n&&n.shape.points;if(i&&i.length<2e4){var l=i.length,h=new Float32Array(l+o.length);h.set(i),h.set(o,l),n.endIndex=e.end,n.setShape({points:h})}else{this._newAdded=[];var s=this._create();s.startIndex=e.start,s.endIndex=e.end,s.incremental=!0,s.setShape({points:o}),this._setCommon(s,t,r)}},a.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},a.prototype._create=function(){var e=new F({cursor:"default"});return this.group.add(e),this._newAdded.push(e),e},a.prototype._setCommon=function(e,t,r){var n=t.hostModel;r=r||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=r.clipShape||null,e.symbolProxy=A(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<w;e.useStyle(n.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("style"),h=l&&l.fill;h&&e.setColor(h);var s=I(e);s.seriesIndex=n.seriesIndex,e.on("mousemove",function(p){s.dataIndex=null;var u=e.hoverDataIdx;u>=0&&(s.dataIndex=u+(e.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),U=G,H=function(a){v(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,n){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,n){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.incrementalPrepareUpdate(o),this._finished=!1},e.prototype.incrementalRender=function(t,r,n){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,n){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=S("").reset(t,r,n);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,n=r&&r.getArea&&r.getArea();return t.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(t,r){var n=this._symbolDraw,o=r.pipelineContext,i=o.large;return(!n||i!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=i?new U:new T,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(L),Z=H;function K(a){g(R),a.registerSeriesModel(N),a.registerChartView(Z),a.registerLayout(S("scatter"))}var W=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"widget-chart-line",attrs:{id:a.domid}})},J=[];g([O,V,K,M]);const Q={name:"ChartScatter",props:{data:{type:Array,require:!0,default:()=>[]},colors:{type:String,require:!1,default:()=>$[0]},name:{type:Array,require:!0,default:()=>[]}},data(){return{domid:`domid-${parseInt(Math.random()*1e8)}`,chartObj:null}},methods:{handleArray(a){let e=[],t=[];return e=this.data.slice(a*2,(a+1)*2),e.forEach((r,n)=>{let o=n+1;o<e.length&&r.value.forEach((i,l)=>{let h=[],s=Math.floor(Math.random()*10+1)*1e8;h.push(i,e[o].value[l],s,r.label[l],this.name[a]),t.push(h)})}),t},hanleData(){let a=parseInt(this.data.length/2),e=[];for(let t=0;t<a;t++){let r=[],n=this.handleArray(t);r.push(n);let o={value:r,name:this.name[t]};e.push(o)}return e},render(){let a=null,e=null,t=[];t=this.hanleData(),t.forEach(n=>{a=n.name,e=n.value});let r={grid:{top:"15%",left:"7%",bottom:"15%",right:"5%",containLabel:!0},xAxis:{boundaryGap:!1,splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0,0,0,0.45)"}},axisTick:{show:!1},axisLabel:{color:"rgba(0,0,0,0.45)",fontSize:12}},yAxis:{type:"value",axisLabel:{color:"rgba(0,0,0,0.45)",interval:"2",fontSize:12},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"rgba(0,0,0,0.15)"}},scale:!0},series:[{name:a,data:e[0],type:"scatter",symbolSize:function(n){return Math.sqrt(n[2])/500},emphasis:{label:{show:!0,formatter:function(n){return n.data[1]+":"+n.data[0]},position:"top"}},itemStyle:{shadowBlur:10,shadowColor:"rgba(120, 36, 50, 0.5)",shadowOffsetY:5,color:this.colors}}]};this.chartObj.setOption(r)}},mounted(){this.chartObj&&this.chartObj.dispose(),this.chartObj=z(document.getElementById(this.domid)),this.$watch(()=>this.data,()=>{Array.isArray(this.data)&&this.data.length>0&&this.render(this.data)},{immediate:!0,deep:!0})}},_={};var k=m(Q,W,J,!1,E,"72153588",null,null);function E(a){for(let e in _)this[e]=_[e]}var Y=function(){return k.exports}(),X=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"example"},[t("h2",[a._v("\u7B80\u4ECB")]),t("p",[a._v("\u57FA\u4E8EEchart\u5C01\u88C5\u7684\u6563\u70B9\u56FE\u7EC4\u4EF6")]),t("h2",[a._v("\u793A\u4F8B")]),t("p",[a._v("data(Array)\uFF1A\u901A\u7528\u56FE\u8868\u683C\u5F0F")]),t("p",[a._v("colors(String)\uFF1A\u7528\u6765\u63CF\u70B9\u7684\u989C\u8272\uFF1B\u9ED8\u8BA4\u5168\u5C40\u8272\u8868")]),t("p",[a._v("name(Array)\uFF1A\u6570\u636E\u540D\u79F0\uFF0C\u6570\u7EC4\u957F\u5EA6\u4E0E'data'\u4FDD\u6301\u4E00\u81F4")]),t("div",{staticClass:"demo"},[t("chart-scatter",{attrs:{data:a.data}})],1),a._m(0)])},tt=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("pre",{staticClass:"code"},[a._v("      "),t("textarea",{attrs:{readonly:""}},[a._v(`      <chart-scatter :data="data" />
      `)]),a._v(`
  `)])}];const et={components:{ChartScatter:Y},data(){return{data:[]}},methods:{fetchData(a,e){return B(a,e).then(t=>t.data)}},created(){this.fetchData(null,{cache:!1}).then(a=>{this.data=a})}},y={};var at=m(et,X,tt,!1,rt,"7219abc6",null,null);function rt(a){for(let e in y)this[e]=y[e]}var ut=function(){return at.exports}();export{ut as default};
