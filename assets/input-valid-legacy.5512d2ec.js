!function(){var e=document.createElement("style");e.innerHTML=".input-valid[data-v-47a1229d]{position:relative}.input-valid[data-v-47a1229d] .overWordCount{color:#f56c6c}.input-valid-count[data-v-47a1229d]{position:absolute;white-space:nowrap;top:2px;bottom:2px;right:2px;padding-left:2px;display:flex;align-items:center;background:#fff}.textarea-valid-count[data-v-47a1229d]{top:auto;color:#c0c4cc;padding:0 2px}\n",document.head.appendChild(e),System.register(["./index-legacy.3a0a0cf0.js","./ui-legacy.ce9474e5.js"],(function(e){"use strict";var t;return{setters:[function(e){t=e.n},function(){}],execute:function(){var a=function(e){return null==e?0:String(e).length},l={name:"input-valid",model:{prop:"value",event:"change"},props:{value:null,validType:{type:String,required:!1,default:"count"},required:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},maxlength:{type:Number,required:!1,default:1/0},showWordLimit:{type:Boolean,requierd:!1,default:!1}},data:function(){return{textLength:a(this.value),inputValue:null}},computed:{showWordCount:function(){return this.maxlength&&this.showWordLimit},overWordCount:function(){return this.textLength>this.maxlength},rules:function(){var e=this;return[{required:this.required,validator:function(){return e.valid()},trigger:"change"}]}},watch:{value:{handler:function(){this.inputValue=this.value},immediate:!0}},methods:{valid:function(){var e=this;return new Promise((function(t,l){if(!a(e.inputValue))return e.required?l("请输入".concat(e.label)):t();switch(e.validType){case"count":e.$nextTick((function(){e.overWordCount?l("超过字数上限，请删减文字"):t()}));break;case"mobile":n=e.inputValue,/^(?:(?:\+|00)86)?1\d{10}$/.test(String(n))?t():l("手机号格式有误，请重新输入");break;case"idCard":!function(e){return/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/.test(String(e))}(e.inputValue)?l("身份证号格式有误，请重新输入"):t();break;case"tel":!function(e){return/^(?:(?:\d{3}-)?\d{8}|^(?:\d{4}-)?\d{7,8})(?:-\d+)?$/.test(String(e))}(e.inputValue)?l("电话格式有误，请重新输入"):t();break;case"email":!function(e){return/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(String(e))}(e.inputValue)?l("邮箱格式有误，请重新输入"):t();break;default:l("validType error: ".concat(e.validType))}var n}))},getValue:function(){return this.inputValue}},mounted:function(){this.$emit("ready",this.rules)}},n=t(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-valid"},[t("el-input",e._b({ref:"input",attrs:{showWordLimit:e.showWordLimit},on:{input:function(t){e.$nextTick((function(){e.textLength=e.$refs.input.textLength}))},change:function(t){return e.$emit("change",t)}},model:{value:e.inputValue,callback:function(t){e.inputValue="string"==typeof t?t.trim():t},expression:"inputValue"}},"el-input",e.$attrs,!1),[e.showWordCount&&"textarea"!==e.$attrs.type?t("div",{staticClass:"input-valid-count",attrs:{slot:"suffix"},slot:"suffix"},[t("span",{class:{overWordCount:e.overWordCount}},[e._v(e._s(e.textLength))]),e._v(" /"+e._s(e.maxlength)+" ")]):e._e()]),e.showWordCount&&"textarea"==e.$attrs.type?t("div",{staticClass:"input-valid-count textarea-valid-count"},[t("span",{class:{overWordCount:e.overWordCount}},[e._v(e._s(e.textLength))]),e._v(" /"+e._s(e.maxlength)+" ")]):e._e()],1)}),[],!1,null,"47a1229d",null,null).exports;e("default",t({components:{InputValid:n},data:function(){return{editForm:{title:"",mobile:null,idCard:null},rules:{title:[],mobile:[],idCard:[]},props:[{name:"validType",desc:"验证类型",type:"String",options:"字数限制: count;验证手机号: mobile; 验证身份证: idCard; 验证座机: tel; 验证邮箱: email",default:"count"},{name:"required",desc:"是否必填校验",type:"Boolean",options:"-",default:"false"},{name:"label",desc:"控件名称，用于拼接必填校验的提示语",type:"String",options:"-",default:""},{name:"maxlength",desc:"最大输入长度，用于count类型验证，允许输入超长",type:"Number",options:"-",default:"Infinity"},{name:"showWordLimit",desc:"显示输入字数统计，配合maxlength实现超长字数标红",type:"Boolean",options:"-",default:"false"}],events:[{name:"ready",desc:"组件就绪回调，参数接收根据validType生成的验证规则，可直接用于el-form验证",param:"rule[Array]"}],methods:[{name:"valid",desc:'根据"validType"验证输入，返回 Promise ，可以直接用做 el-form 的自定义校验方法',param:"-",example:'this.$refs.myInput.valid().then(() => alert("验证通过"))'},{name:"getValue",desc:"获取当前输入值",param:"-",example:"this.$refs.myInput.getValue()"}]}},methods:{handleSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$message.success("验证通过")}))}},created:function(){}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"example"},[t("h2",[e._v("简介")]),t("p",[e._v("集成验证方法的输入框。")]),t("h2",[e._v("示例")]),t("div",{staticClass:"demo"},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("input-valid",{attrs:{maxlength:10,"show-word-limit":"",required:"",label:"标题"},on:{ready:function(t){return e.rules.title=t}},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("input-valid",{attrs:{validType:"mobile",required:"",label:"手机号"},on:{ready:function(t){return e.rules.mobile=t}},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1),t("el-form-item",{attrs:{label:"身份证",prop:"idCard"}},[t("input-valid",{attrs:{validType:"idCard",required:"",label:"身份证"},on:{ready:function(t){return e.rules.idCard=t}},model:{value:e.editForm.idCard,callback:function(t){e.$set(e.editForm,"idCard",t)},expression:"editForm.idCard"}})],1),t("el-form-item",[t("el-button",{on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1),e._m(0),t("h2",[e._v("配置")]),t("el-table",{attrs:{data:e.props}},[t("el-table-column",{attrs:{prop:"name",label:"属性"}}),t("el-table-column",{attrs:{prop:"desc",label:"说明"}}),t("el-table-column",{attrs:{prop:"type",label:"类型"}}),t("el-table-column",{attrs:{prop:"options",label:"可选"}}),t("el-table-column",{attrs:{prop:"default",label:"默认"}})],1),t("h2",[e._v("事件")]),t("el-table",{attrs:{data:e.events}},[t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"desc",label:"说明"}}),t("el-table-column",{attrs:{prop:"param",label:"参数"}})],1),t("h2",[e._v("方法")]),t("el-table",{attrs:{data:e.methods}},[t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"desc",label:"说明"}}),t("el-table-column",{attrs:{prop:"param",label:"参数"}}),t("el-table-column",{attrs:{prop:"example",label:"示例"}})],1)],1)}),[function(){var e=this,t=e._self._c;return t("pre",{staticClass:"code"},[e._v("    "),t("textarea",{attrs:{readonly:"",rows:"13"}},[e._v('    <el-form ref="editForm" :model="editForm" :rules="rules" label-width="80px">\n        <el-form-item label="标题" prop="title">\n          <input-valid\n            v-model="editForm.title"\n            :maxlength="10"\n            show-word-limit\n            required\n            label="标题"\n            @ready="rule => rules.title = rule"\n          />\n        </el-form-item>\n        ...\n    ')]),e._v("\n  ")])}],!1,null,"67da3cd5",null,null).exports)}}}))}();
