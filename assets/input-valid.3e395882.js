import{n as o}from"./index.208c0d27.js";import"./ui.9b8b7178.js";const s=e=>/^(?:(?:\+|00)86)?1\d{10}$/.test(String(e)),u=e=>/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/.test(String(e)),d=e=>/^(?:(?:\d{3}-)?\d{8}|^(?:\d{4}-)?\d{7,8})(?:-\d+)?$/.test(String(e)),p=e=>/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(String(e));var m=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"input-valid"},[t("el-input",e._b({ref:"input",attrs:{showWordLimit:e.showWordLimit},on:{input:function(l){e.$nextTick(function(){e.textLength=e.$refs.input.textLength})},change:function(l){return e.$emit("change",l)}},model:{value:e.inputValue,callback:function(l){e.inputValue=typeof l=="string"?l.trim():l},expression:"inputValue"}},"el-input",e.$attrs,!1),[e.showWordCount&&e.$attrs.type!=="textarea"?t("div",{staticClass:"input-valid-count",attrs:{slot:"suffix"},slot:"suffix"},[t("span",{class:{overWordCount:e.overWordCount}},[e._v(e._s(e.textLength))]),e._v(" /"+e._s(e.maxlength)+" ")]):e._e()]),e.showWordCount&&e.$attrs.type=="textarea"?t("div",{staticClass:"input-valid-count textarea-valid-count"},[t("span",{class:{overWordCount:e.overWordCount}},[e._v(e._s(e.textLength))]),e._v(" /"+e._s(e.maxlength)+" ")]):e._e()],1)},c=[];const r=function(e){return e==null?0:String(e).length},v={name:"input-valid",model:{prop:"value",event:"change"},props:{value:null,validType:{type:String,required:!1,default:"count"},required:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},maxlength:{type:Number,required:!1,default:1/0},showWordLimit:{type:Boolean,requierd:!1,default:!1}},data(){return{textLength:r(this.value),inputValue:null}},computed:{showWordCount(){return this.maxlength&&this.showWordLimit},overWordCount(){return this.textLength>this.maxlength},rules(){return[{required:this.required,validator:()=>this.valid(),trigger:"change"}]}},watch:{value:{handler(){this.inputValue=this.value},immediate:!0}},methods:{valid(){return new Promise((e,a)=>{if(!r(this.inputValue))return this.required?a(`\u8BF7\u8F93\u5165${this.label}`):e();switch(this.validType){case"count":this.$nextTick(()=>{this.overWordCount?a("\u8D85\u8FC7\u5B57\u6570\u4E0A\u9650\uFF0C\u8BF7\u5220\u51CF\u6587\u5B57"):e()});break;case"mobile":s(this.inputValue)?e():a("\u624B\u673A\u53F7\u683C\u5F0F\u6709\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165");break;case"idCard":u(this.inputValue)?e():a("\u8EAB\u4EFD\u8BC1\u53F7\u683C\u5F0F\u6709\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165");break;case"tel":d(this.inputValue)?e():a("\u7535\u8BDD\u683C\u5F0F\u6709\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165");break;case"email":p(this.inputValue)?e():a("\u90AE\u7BB1\u683C\u5F0F\u6709\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165");break;default:a(`validType error: ${this.validType}`)}})},getValue(){return this.inputValue}},mounted(){this.$emit("ready",this.rules)}},i={};var f=o(v,m,c,!1,h,"05c07666",null,null);function h(e){for(let a in i)this[a]=i[a]}var _=function(){return f.exports}(),b=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"example"},[t("h2",[e._v("\u7B80\u4ECB")]),t("p",[e._v("\u96C6\u6210\u9A8C\u8BC1\u65B9\u6CD5\u7684\u8F93\u5165\u6846\u3002")]),t("h2",[e._v("\u793A\u4F8B")]),t("div",{staticClass:"demo"},[t("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u6807\u9898",prop:"title"}},[t("input-valid",{attrs:{maxlength:10,"show-word-limit":"",required:"",label:"\u6807\u9898"},on:{ready:function(l){return e.rules.title=l}},model:{value:e.editForm.title,callback:function(l){e.$set(e.editForm,"title",l)},expression:"editForm.title"}})],1),t("el-form-item",{attrs:{label:"\u624B\u673A\u53F7",prop:"mobile"}},[t("input-valid",{attrs:{validType:"mobile",required:"",label:"\u624B\u673A\u53F7"},on:{ready:function(l){return e.rules.mobile=l}},model:{value:e.editForm.mobile,callback:function(l){e.$set(e.editForm,"mobile",l)},expression:"editForm.mobile"}})],1),t("el-form-item",{attrs:{label:"\u8EAB\u4EFD\u8BC1",prop:"idCard"}},[t("input-valid",{attrs:{validType:"idCard",required:"",label:"\u8EAB\u4EFD\u8BC1"},on:{ready:function(l){return e.rules.idCard=l}},model:{value:e.editForm.idCard,callback:function(l){e.$set(e.editForm,"idCard",l)},expression:"editForm.idCard"}})],1),t("el-form-item",[t("el-button",{on:{click:e.handleSubmit}},[e._v("\u63D0\u4EA4")])],1)],1)],1),e._m(0),t("h2",[e._v("\u914D\u7F6E")]),t("el-table",{attrs:{data:e.props}},[t("el-table-column",{attrs:{prop:"name",label:"\u5C5E\u6027"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"type",label:"\u7C7B\u578B"}}),t("el-table-column",{attrs:{prop:"options",label:"\u53EF\u9009"}}),t("el-table-column",{attrs:{prop:"default",label:"\u9ED8\u8BA4"}})],1),t("h2",[e._v("\u4E8B\u4EF6")]),t("el-table",{attrs:{data:e.events}},[t("el-table-column",{attrs:{prop:"name",label:"\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"param",label:"\u53C2\u6570"}})],1),t("h2",[e._v("\u65B9\u6CD5")]),t("el-table",{attrs:{data:e.methods}},[t("el-table-column",{attrs:{prop:"name",label:"\u540D\u79F0"}}),t("el-table-column",{attrs:{prop:"desc",label:"\u8BF4\u660E"}}),t("el-table-column",{attrs:{prop:"param",label:"\u53C2\u6570"}}),t("el-table-column",{attrs:{prop:"example",label:"\u793A\u4F8B"}})],1)],1)},x=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("pre",{staticClass:"code"},[e._v("    "),t("textarea",{attrs:{readonly:"",rows:"13"}},[e._v(`    <el-form ref="editForm" :model="editForm" :rules="rules" label-width="80px">
        <el-form-item label="\u6807\u9898" prop="title">
          <input-valid
            v-model="editForm.title"
            :maxlength="10"
            show-word-limit
            required
            label="\u6807\u9898"
            @ready="rule => rules.title = rule"
          />
        </el-form-item>
        ...
    `)]),e._v(`
  `)])}];const g={components:{InputValid:_},data(){return{editForm:{title:"",mobile:null,idCard:null},rules:{title:[],mobile:[],idCard:[]},props:[{name:"validType",desc:"\u9A8C\u8BC1\u7C7B\u578B",type:"String",options:"\u5B57\u6570\u9650\u5236: count;\u9A8C\u8BC1\u624B\u673A\u53F7: mobile; \u9A8C\u8BC1\u8EAB\u4EFD\u8BC1: idCard; \u9A8C\u8BC1\u5EA7\u673A: tel; \u9A8C\u8BC1\u90AE\u7BB1: email",default:"count"},{name:"required",desc:"\u662F\u5426\u5FC5\u586B\u6821\u9A8C",type:"Boolean",options:"-",default:"false"},{name:"label",desc:"\u63A7\u4EF6\u540D\u79F0\uFF0C\u7528\u4E8E\u62FC\u63A5\u5FC5\u586B\u6821\u9A8C\u7684\u63D0\u793A\u8BED",type:"String",options:"-",default:""},{name:"maxlength",desc:"\u6700\u5927\u8F93\u5165\u957F\u5EA6\uFF0C\u7528\u4E8Ecount\u7C7B\u578B\u9A8C\u8BC1\uFF0C\u5141\u8BB8\u8F93\u5165\u8D85\u957F",type:"Number",options:"-",default:"Infinity"},{name:"showWordLimit",desc:"\u663E\u793A\u8F93\u5165\u5B57\u6570\u7EDF\u8BA1\uFF0C\u914D\u5408maxlength\u5B9E\u73B0\u8D85\u957F\u5B57\u6570\u6807\u7EA2",type:"Boolean",options:"-",default:"false"}],events:[{name:"ready",desc:"\u7EC4\u4EF6\u5C31\u7EEA\u56DE\u8C03\uFF0C\u53C2\u6570\u63A5\u6536\u6839\u636EvalidType\u751F\u6210\u7684\u9A8C\u8BC1\u89C4\u5219\uFF0C\u53EF\u76F4\u63A5\u7528\u4E8Eel-form\u9A8C\u8BC1",param:"rule[Array]"}],methods:[{name:"valid",desc:'\u6839\u636E"validType"\u9A8C\u8BC1\u8F93\u5165\uFF0C\u8FD4\u56DE Promise \uFF0C\u53EF\u4EE5\u76F4\u63A5\u7528\u505A el-form \u7684\u81EA\u5B9A\u4E49\u6821\u9A8C\u65B9\u6CD5',param:"-",example:'this.$refs.myInput.valid().then(() => alert("\u9A8C\u8BC1\u901A\u8FC7"))'},{name:"getValue",desc:"\u83B7\u53D6\u5F53\u524D\u8F93\u5165\u503C",param:"-",example:"this.$refs.myInput.getValue()"}]}},methods:{handleSubmit(){this.$refs.editForm.validate(e=>{e&&this.$message.success("\u9A8C\u8BC1\u901A\u8FC7")})}},created(){}},n={};var y=o(g,b,x,!1,C,"ff2a6b0c",null,null);function C(e){for(let a in n)this[a]=n[a]}var F=function(){return y.exports}();export{F as default};
