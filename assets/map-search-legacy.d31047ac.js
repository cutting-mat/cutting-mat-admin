!function(){var e=document.createElement("style");e.innerHTML=".bmap[data-v-0b78d1e4] img{max-width:none}.titleBar[data-v-0b78d1e4]{font-size:16px;color:#333;padding:12px 20px}.titleBar ._icon[data-v-0b78d1e4]{color:#fe664e}.list[data-v-0b78d1e4]{background:#fff;box-sizing:border-box;padding:0 1em}.list ._item[data-v-0b78d1e4]{border-bottom:1px solid #f5f5f5;padding:10px;color:#999;cursor:pointer}.list ._title[data-v-0b78d1e4]{font-size:14px;color:#333}.list ._check[data-v-0b78d1e4]{width:18px;height:18px;border:1px solid #ccc;border-radius:10px}.list .cur ._check[data-v-0b78d1e4]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAABm0lEQVQ4T62Uv0ojYRTFz5n5RLRY8AESFbdQUDN2a0BQFoxWdhYKW7hPYadgYbHgC+yKK2i/W2kqq6zlBAXFJWgyT6CVYb/kyEz+mI2TGNCvvHPvj3PPnXuJmFdKmUU5WqeQBpCopwQicqzyKJm32fYytgZupzBuXPNDjAAdH4Wcrdivoxe4biQ1QYFn5kX8AvChG6Tl2wOFlYRvz8JYBLqbxAT7zDl7h0Q8AQ/6Zz+NXOIqAhU9kyMx26OS/9Io/En4Ns3blMm4Dk56hVAqCrwHMd2sqWKJxRn3J8EvPYGEG9AuEO6ywO+NGkGHDDz3r8iPr4LqEFXMBF39BjjYrJEKLHnuI8j+luABySEBK8+xmpJYSOS6yjEgfCv4dnPM6zsCtYpuSpq9qRzbmoStpG93As/sgnavo5JnUKGj2SFs2LfbxWnz+YUnbYZGZpdSJoNO468qCwdzAAe6DiMcf5gQeCant/6Q77oidVVvX9pG/+EZcVyz/9rehftlK3Yj9oy0mhkOQI7WHCGt+mEjEFRrh+04mben7eY/AZVvwjNLUdLoAAAAAElFTkSuQmCC) center center no-repeat;border-color:transparent}\n",document.head.appendChild(e),System.register(["./index-legacy.dc70cf32.js","./ui-legacy.77070732.js"],(function(e){"use strict";var t;return{setters:[function(e){t=e.n},function(){}],execute:function(){var n,a,r="PxyAUL3q2WMUP6s0ol4PGvVsUbrAG7PG",i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-col"},[n("div",{staticClass:"bmap flex-1",attrs:{id:e.mapId}}),e._m(0),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"flex-1 scrollbar list"},e._l(e.searchResults,(function(t,a){return n("div",{key:a,staticClass:"_item flex-row align-center",class:{cur:e.currentItem&&e.currentItem.uid===t.uid},on:{click:function(n){return e.handleClick(t)}}},[n("div",{staticClass:"flex-1"},[n("div",{staticClass:"_title el"},[e._v(" "+e._s(t.title)+" ")]),n("div",{staticClass:"el"},[e._v(" "+e._s(t.address)+" ")])]),n("div",{staticClass:"_check"})])})),0)])},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"titleBar"},[n("i",{staticClass:"el-icon-location _icon"}),e._v(" 选择地点 ")])}],o={props:{center:{type:Object,required:!1,default:function(){return{lng:121.491,lat:31.233}}},zoomLevel:{type:Number,required:!1,default:14}},data:function(){return{mapId:"BMap_".concat(parseInt(1e8*Math.random())),loading:!1,map:null,marker:null,searchResults:[],currentItem:null}},watch:{center:{handler:function(){this.center&&this.center.lng&&this.center.lat&&this.handleCenter(this.center,this.handleSearch)},deep:!0}},methods:{handleClick:function(e){this.currentItem=e,this.setMaker(e.point),this.$emit("change",e)},setMaker:function(e){this.marker&&(this.map.removeOverlay(this.marker),this.marker=null),this.marker=new a.Marker(new a.Point(e.lng,e.lat)),this.map.addOverlay(this.marker),this.map.panTo(e)},handleCenter:function(e,t){var r=this;!function(e,t,a){if(!n)return null;if("function"==typeof t&&(a=t,t=1),Array.isArray(e)){var r=e.map((function(e){return new n.Point(e.lng,e.lat)}));(new n.Convertor).translate(r,t,5,a)}}([e],(function(e){0===e.status&&(console.log("转换完成",e.points),r.map.centerAndZoom(new a.Point(e.points[0].lng,e.points[0].lat),r.zoomLevel),r.setMaker(e.points[0]),"function"==typeof t&&t(e.points[0]))}))},handleSearch:function(e){var t,a,r,i,l=this;if(this.loading)return null;this.loading=!0,(t=e,a=["景点"],i={},new Promise((function(e,l){if(!t||!a)return l("mapSearch(): 缺少参数");var o=new n.LocalSearch(t,{pageCapacity:50,onSearchComplete:function(t){var n=Array.isArray(a)?a:[a],r=Array.isArray(t)?t:[t],l=n.map((function(e,t){return new Promise((function(e){for(var n=r[t],a=n.getNumPages(),l=n.getPageIndex(),c=0;c<n.getCurrentNumPois();c++){var s=n.getPoi(c);s.uid&&!i[s.uid]&&(i[s.uid]=s)}l<a-1?o.gotoPage(l+1):e(i,o)}))}));Promise.all(l).then((function(){e(Object.keys(i).map((function(e){return i[e]})))}))}});r?o.searchNearby(a,t,r):o.search(a)}))).then((function(e){l.searchResults=e,l.loading=!1}))}},mounted:function(){var e=this;!function(e,t){if(!e||!e.split)return console.warn("缺少参数：ak");var a="bdmap-sdk-by-widget-bmap";if(document.getElementById(a)||n||window.BMap)n=window.BMap,t(n);else{var r="initialize_".concat(parseInt(1e8*Math.random()));window[r]=function(){"function"==typeof t&&(n=window.BMap,t(n))};var i=document.createElement("script");i.id=a,i.src="//api.map.baidu.com/api?v=3.0&ak=".concat(e,"&callback=").concat(r),document.body.appendChild(i)}}(r,(function(t){a=t,e.map=new a.Map(e.mapId),e.center&&e.center.lng&&e.center.lat&&e.handleCenter(e.center,e.handleSearch)}))}},c={},s=t(o,i,l,!1,d,"0b78d1e4",null,null);function d(e){for(var t in c)this[t]=c[t]}var u=function(){return s.exports}(),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("简介")]),n("p",[e._v("地图搜索组件。")]),n("h2",[e._v("示例")]),n("div",{staticClass:"demo"},[n("Search",{staticStyle:{height:"600px"}})],1),e._m(0),n("h2",[e._v("配置")]),n("el-table",{attrs:{data:e.props}},[n("el-table-column",{attrs:{prop:"name",label:"属性"}}),n("el-table-column",{attrs:{prop:"desc",label:"说明"}}),n("el-table-column",{attrs:{prop:"type",label:"类型"}}),n("el-table-column",{attrs:{prop:"options",label:"可选"}}),n("el-table-column",{attrs:{prop:"default",label:"默认"}})],1),n("h2",[e._v("事件")]),n("el-table",{attrs:{data:e.events}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"desc",label:"说明"}}),n("el-table-column",{attrs:{prop:"param",label:"参数"}})],1)],1)},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticClass:"code"},[e._v("      "),n("textarea",{attrs:{readonly:"",rows:"6"}},[e._v('      <Search style="height: 600px" />\n      ')]),e._v("\n  ")])}],h={},f=t({components:{Search:u},data:function(){return{editForm:{album:""},props:[{name:"value",desc:"图片数据，必须含有url字段",type:"Object",options:"-",default:"-"},{name:"placeholder",desc:"上传占位文字",type:"String",options:"-",default:"上传"}],events:[{name:"change",desc:"上传图片成功事件",param:"file[Object]"}]}},methods:{},created:function(){}},p,m,!1,v,"8c6b39e8",null,null);function v(e){for(var t in h)this[t]=h[t]}e("default",function(){return f.exports}())}}}))}();
