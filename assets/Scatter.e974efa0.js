import{_ as v,e as b,aG as D,P as x,G as C,c as A,p as I,u as L,V as g,W as M,X as P,Y as $}from"./variate.eab112d8.js";import{n as m}from"./index.a72009ba.js";import{c as z,p as S,S as T,d as N,i as R}from"./points.ef1e1175.js";import{b as O}from"./install.c68894ca.js";import"./ui.9b8b7178.js";import"./axisAlignTicks.3421a2c0.js";var V=function(r){v(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return z(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,a,n){return n.point(a.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(b),B=V,w=4,j=function(){function r(){}return r}(),F=function(r){v(e,r);function e(t){var a=r.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return e.prototype.getDefaultShape=function(){return new j},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,a){var n=a.points,o=a.size,i=this.symbolProxy,l=i.shape,h=t.getContext?t.getContext():t,s=h&&o[0]<w,p=this.softClipShape,u;if(s){this._ctx=h;return}for(this._ctx=null,u=this._off;u<n.length;){var c=n[u++],d=n[u++];isNaN(c)||isNaN(d)||p&&!p.contain(c,d)||(l.x=c-o[0]/2,l.y=d-o[1]/2,l.width=o[0],l.height=o[1],i.buildPath(t,l,!0))}this.incremental&&(this._off=u,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,n=t.size,o=this._ctx,i=this.softClipShape,l;if(!!o){for(l=this._off;l<a.length;){var h=a[l++],s=a[l++];isNaN(h)||isNaN(s)||i&&!i.contain(h,s)||o.fillRect(h-n[0]/2,s-n[1]/2,n[0],n[1])}this.incremental&&(this._off=l,this.notClear=!0)}},e.prototype.findDataIndex=function(t,a){for(var n=this.shape,o=n.points,i=n.size,l=Math.max(i[0],4),h=Math.max(i[1],4),s=o.length/2-1;s>=0;s--){var p=s*2,u=o[p]-l/2,c=o[p+1]-h/2;if(t>=u&&a>=c&&t<=u+l&&a<=c+h)return s}return-1},e.prototype.contain=function(t,a){var n=this.transformCoordToLocal(t,a),o=this.getBoundingRect();if(t=n[0],a=n[1],o.contain(t,a)){var i=this.hoverDataIdx=this.findDataIndex(t,a);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,n=a.points,o=a.size,i=o[0],l=o[1],h=1/0,s=1/0,p=-1/0,u=-1/0,c=0;c<n.length;){var d=n[c++],f=n[c++];h=Math.min(d,h),p=Math.max(d,p),s=Math.min(f,s),u=Math.max(f,u)}t=this._rect=new D(h-i/2,s-l/2,p-h+i,u-s+l)}return t},e}(x),U=function(){function r(){this.group=new C}return r.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},r.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var n=(a.endIndex-a.startIndex)*2,o=a.startIndex*4*2;t=new Float32Array(t.buffer,o,n)}a.setShape("points",t),a.reset()})},r.prototype.incrementalPrepareUpdate=function(e){this._clear()},r.prototype.incrementalUpdate=function(e,t,a){var n=this._newAdded[0],o=t.getLayout("points"),i=n&&n.shape.points;if(i&&i.length<2e4){var l=i.length,h=new Float32Array(l+o.length);h.set(i),h.set(o,l),n.endIndex=e.end,n.setShape({points:h})}else{this._newAdded=[];var s=this._create();s.startIndex=e.start,s.endIndex=e.end,s.incremental=!0,s.setShape({points:o}),this._setCommon(s,t,a)}},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new F({cursor:"default"});return this.group.add(e),this._newAdded.push(e),e},r.prototype._setCommon=function(e,t,a){var n=t.hostModel;a=a||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=a.clipShape||null,e.symbolProxy=A(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<w;e.useStyle(n.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("style"),h=l&&l.fill;h&&e.setColor(h);var s=I(e);s.seriesIndex=n.seriesIndex,e.on("mousemove",function(p){s.dataIndex=null;var u=e.hoverDataIdx;u>=0&&(s.dataIndex=u+(e.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),K=U,G=function(r){v(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,n){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,n){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.incrementalPrepareUpdate(o),this._finished=!1},e.prototype.incrementalRender=function(t,a,n){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,n){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=S("").reset(t,a,n);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var a=t.coordinateSystem,n=a&&a.getArea&&a.getArea();return t.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(t,a){var n=this._symbolDraw,o=a.pipelineContext,i=o.large;return(!n||i!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=i?new K:new T,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(L),q=G;function Z(r){g(N),r.registerSeriesModel(B),r.registerChartView(q),r.registerLayout(S("scatter"))}var H=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"widget-chart-line",attrs:{id:r.domid}})},J=[];g([R,O,Z,M]);const k={name:"ChartScatter",props:{data:{type:Array,require:!0,default:()=>[]},colors:{type:String,require:!1,default:()=>P[0]},name:{type:Array,require:!0,default:()=>[]}},data(){return{domid:`domid-${parseInt(Math.random()*1e8)}`,chartObj:null}},watch:{data:{handler(){Array.isArray(this.data)&&this.data.length>0&&this.render()},deep:!0}},methods:{handleArray(r){let e=[],t=[];return e=this.data.slice(r*2,(r+1)*2),e.forEach((a,n)=>{let o=n+1;o<e.length&&a.value.forEach((i,l)=>{let h=[],s=Math.floor(Math.random()*10+1)*1e8;h.push(i,e[o].value[l],s,a.label[l],this.name[r]),t.push(h)})}),t},hanleData(){let r=parseInt(this.data.length/2),e=[];for(let t=0;t<r;t++){let a=[],n=this.handleArray(t);a.push(n);let o={value:a,name:this.name[t]};e.push(o)}return e},render(){let r=null,e=null,t=[];t=this.hanleData(),t.forEach(n=>{r=n.name,e=n.value});let a={grid:{top:"15%",left:"7%",bottom:"15%",right:"5%",containLabel:!0},xAxis:{boundaryGap:!1,splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0,0,0,0.45)"}},axisTick:{show:!1},axisLabel:{color:"rgba(0,0,0,0.45)",fontSize:12}},yAxis:{type:"value",axisLabel:{color:"rgba(0,0,0,0.45)",interval:"2",fontSize:12},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"rgba(0,0,0,0.15)"}},scale:!0},series:[{name:r,data:e[0],type:"scatter",symbolSize:function(n){return Math.sqrt(n[2])/500},emphasis:{label:{show:!0,formatter:function(n){return n.data[1]+":"+n.data[0]},position:"top"}},itemStyle:{shadowBlur:10,shadowColor:"rgba(120, 36, 50, 0.5)",shadowOffsetY:5,color:this.colors}}]};this.chartObj.setOption(a)}},mounted(){this.chartObj&&this.chartObj.dispose(),this.chartObj=$(document.getElementById(this.domid)),Array.isArray(this.data)&&this.data.length>0&&this.render()}},_={};var W=m(k,H,J,!1,Q,"df311ba2",null,null);function Q(r){for(let e in _)this[e]=_[e]}var E=function(){return W.exports}(),Y=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"example"},[t("h2",[r._v("\u7B80\u4ECB")]),t("p",[r._v("\u57FA\u4E8EEchart\u5C01\u88C5\u7684\u6563\u70B9\u56FE\u7EC4\u4EF6")]),t("h2",[r._v("\u793A\u4F8B")]),t("p",[r._v("data(Array)\uFF1A\u901A\u7528\u56FE\u8868\u683C\u5F0F")]),t("p",[r._v("colors(String)\uFF1A\u7528\u6765\u63CF\u70B9\u7684\u989C\u8272\uFF1B\u9ED8\u8BA4\u5168\u5C40\u8272\u8868")]),t("p",[r._v("name(Array)\uFF1A\u6570\u636E\u540D\u79F0\uFF0C\u6570\u7EC4\u957F\u5EA6\u4E0E'data'\u4FDD\u6301\u4E00\u81F4")]),t("div",{staticClass:"demo"},[t("chart-scatter",{attrs:{data:r.data,colors:"rgba(91,143,249,0.5)"}})],1),r._m(0)])},X=[function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("pre",{staticClass:"code"},[r._v("          "),t("textarea",{attrs:{readonly:""}},[r._v(`          <chart-scatter :data="data" colors="rgba(91,143,249,0.5)" />
          `)]),r._v(`
      `)])}];const tt={components:{ChartScatter:E},data(){return{data:[{label:["Australia","Canada","China","Cuba","Finland","France","Germany","Iceland","India","Japan","North Korea","South Korea","New Zealand","Norway","Poland","Russia","Turkey","United Kingdom","United States"],value:[28604,31163,1516,13670,28599,29476,31476,28666,1777,29550,2076,12087,24021,43296,10088,19349,10670,26424,37062]},{label:["Australia","Canada","China","Cuba","Finland","France","Germany","Iceland","India","Japan","North Korea","South Korea","New Zealand","Norway","Poland","Russia","Turkey","United Kingdom","United States"],value:[77,77.4,68,74.7,75,77.1,75.4,78.1,57.7,79.1,67.9,72,72,75.4,76.8,70.8,69.6,67.3,75.7]}]}},methods:{},created(){}},y={};var et=m(tt,Y,X,!1,at,"3e97d32e",null,null);function at(r){for(let e in y)this[e]=y[e]}var ht=function(){return et.exports}();export{ht as default};
