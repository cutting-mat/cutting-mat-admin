import{_ as f,e as S,aG as w,P as b,G as D,c as x,p as C,u as A,V as _,W as I,X as L,Y as z}from"./variate.71f5ba4d.js";import{n as y}from"./index.ec256302.js";import{c as M,p as g,S as P,d as T,i as $}from"./points.45efacac.js";import{b as R,g as O}from"./index.40a32384.js";import"./ui.c0058d49.js";import"./axisAlignTicks.8b4a80f1.js";var V=function(o){f(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return M(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,a,r){return r.point(a.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(S);const B=V;var m=4,N=function(){function o(){}return o}(),j=function(o){f(e,o);function e(t){var a=o.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return e.prototype.getDefaultShape=function(){return new N},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,a){var r=a.points,n=a.size,i=this.symbolProxy,l=i.shape,h=t.getContext?t.getContext():t,s=h&&n[0]<m,c=this.softClipShape,p;if(s){this._ctx=h;return}for(this._ctx=null,p=this._off;p<r.length;){var u=r[p++],d=r[p++];isNaN(u)||isNaN(d)||c&&!c.contain(u,d)||(l.x=u-n[0]/2,l.y=d-n[1]/2,l.width=n[0],l.height=n[1],i.buildPath(t,l,!0))}this.incremental&&(this._off=p,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,r=t.size,n=this._ctx,i=this.softClipShape,l;if(!!n){for(l=this._off;l<a.length;){var h=a[l++],s=a[l++];isNaN(h)||isNaN(s)||i&&!i.contain(h,s)||n.fillRect(h-r[0]/2,s-r[1]/2,r[0],r[1])}this.incremental&&(this._off=l,this.notClear=!0)}},e.prototype.findDataIndex=function(t,a){for(var r=this.shape,n=r.points,i=r.size,l=Math.max(i[0],4),h=Math.max(i[1],4),s=n.length/2-1;s>=0;s--){var c=s*2,p=n[c]-l/2,u=n[c+1]-h/2;if(t>=p&&a>=u&&t<=p+l&&a<=u+h)return s}return-1},e.prototype.contain=function(t,a){var r=this.transformCoordToLocal(t,a),n=this.getBoundingRect();if(t=r[0],a=r[1],n.contain(t,a)){var i=this.hoverDataIdx=this.findDataIndex(t,a);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,r=a.points,n=a.size,i=n[0],l=n[1],h=1/0,s=1/0,c=-1/0,p=-1/0,u=0;u<r.length;){var d=r[u++],v=r[u++];h=Math.min(d,h),c=Math.max(d,c),s=Math.min(v,s),p=Math.max(v,p)}t=this._rect=new w(h-i/2,s-l/2,c-h+i,p-s+l)}return t},e}(b),q=function(){function o(){this.group=new D}return o.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},o.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,n=a.startIndex*4*2;t=new Float32Array(t.buffer,n,r)}a.setShape("points",t),a.reset()})},o.prototype.incrementalPrepareUpdate=function(e){this._clear()},o.prototype.incrementalUpdate=function(e,t,a){var r=this._newAdded[0],n=t.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var l=i.length,h=new Float32Array(l+n.length);h.set(i),h.set(n,l),r.endIndex=e.end,r.setShape({points:h})}else{this._newAdded=[];var s=this._create();s.startIndex=e.start,s.endIndex=e.end,s.incremental=!0,s.setShape({points:n}),this._setCommon(s,t,a)}},o.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},o.prototype._create=function(){var e=new j({cursor:"default"});return this.group.add(e),this._newAdded.push(e),e},o.prototype._setCommon=function(e,t,a){var r=t.hostModel;a=a||{};var n=t.getVisual("symbolSize");e.setShape("size",n instanceof Array?n:[n,n]),e.softClipShape=a.clipShape||null,e.symbolProxy=x(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<m;e.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var l=t.getVisual("style"),h=l&&l.fill;h&&e.setColor(h);var s=C(e);s.seriesIndex=r.seriesIndex,e.on("mousemove",function(c){s.dataIndex=null;var p=e.hoverDataIdx;p>=0&&(s.dataIndex=p+(e.startIndex||0))})},o.prototype.remove=function(){this._clear()},o.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},o}();const F=q;var G=function(o){f(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,r){var n=t.getData(),i=this._updateSymbolDraw(n,t);i.updateData(n,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,r){var n=t.getData(),i=this._updateSymbolDraw(n,t);i.incrementalPrepareUpdate(n),this._finished=!1},e.prototype.incrementalRender=function(t,a,r){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,r){var n=t.getData();if(this.group.dirty(),!this._finished||n.count()>1e4)return{update:!0};var i=g("").reset(t,a,r);i.progress&&i.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var a=t.coordinateSystem,r=a&&a.getArea&&a.getArea();return t.get("clip",!0)?r:null},e.prototype._updateSymbolDraw=function(t,a){var r=this._symbolDraw,n=a.pipelineContext,i=n.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new F:new P,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(A);const U=G;function H(o){_(T),o.registerSeriesModel(B),o.registerChartView(U),o.registerLayout(g("scatter"))}_([$,R,H,I]);const Z={name:"ChartScatter",props:{data:{type:Array,require:!0,default:()=>[]},colors:{type:String,require:!1,default:()=>L[0]},name:{type:Array,require:!0,default:()=>[]}},data(){return{domid:`domid-${parseInt(Math.random()*1e8)}`,chartObj:null}},methods:{handleArray(o){let e=[],t=[];return e=this.data.slice(o*2,(o+1)*2),e.forEach((a,r)=>{let n=r+1;n<e.length&&a.value.forEach((i,l)=>{let h=[],s=Math.floor(Math.random()*10+1)*1e8;h.push(i,e[n].value[l],s,a.label[l],this.name[o]),t.push(h)})}),t},hanleData(){let o=parseInt(this.data.length/2),e=[];for(let t=0;t<o;t++){let a=[],r=this.handleArray(t);a.push(r);let n={value:a,name:this.name[t]};e.push(n)}return e},render(){let o=null,e=null,t=[];t=this.hanleData(),t.forEach(r=>{o=r.name,e=r.value});let a={grid:{top:"15%",left:"7%",bottom:"15%",right:"5%",containLabel:!0},xAxis:{boundaryGap:!1,splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"rgba(0,0,0,0.45)"}},axisTick:{show:!1},axisLabel:{color:"rgba(0,0,0,0.45)",fontSize:12}},yAxis:{type:"value",axisLabel:{color:"rgba(0,0,0,0.45)",interval:"2",fontSize:12},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"rgba(0,0,0,0.15)"}},scale:!0},series:[{name:o,data:e[0],type:"scatter",symbolSize:function(r){return Math.sqrt(r[2])/500},emphasis:{label:{show:!0,formatter:function(r){return r.data[1]+":"+r.data[0]},position:"top"}},itemStyle:{shadowBlur:10,shadowColor:"rgba(120, 36, 50, 0.5)",shadowOffsetY:5,color:this.colors}}]};this.chartObj.setOption(a)}},mounted(){this.chartObj&&this.chartObj.dispose(),this.chartObj=z(document.getElementById(this.domid)),this.$watch(()=>this.data,()=>{Array.isArray(this.data)&&this.data.length>0&&this.render(this.data)},{immediate:!0,deep:!0})}};var K=function(){var e=this,t=e._self._c;return t("div",{staticClass:"widget-chart-line",attrs:{id:e.domid}})},W=[],J=y(Z,K,W,!1,null,"9bb8a6cd",null,null);const Q=J.exports;const k={components:{ChartScatter:Q},data(){return{data:[]}},methods:{fetchData(o,e){return O(o,e).then(t=>t.data)}},created(){this.fetchData(null,{cache:!1}).then(o=>{this.data=o})}};var Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"example"},[t("h2",[e._v("\u7B80\u4ECB")]),t("p",[e._v("\u57FA\u4E8EEchart\u5C01\u88C5\u7684\u6563\u70B9\u56FE\u7EC4\u4EF6")]),t("h2",[e._v("\u793A\u4F8B")]),t("p",[e._v("data(Array)\uFF1A\u901A\u7528\u56FE\u8868\u683C\u5F0F")]),t("p",[e._v("colors(String)\uFF1A\u7528\u6765\u63CF\u70B9\u7684\u989C\u8272\uFF1B\u9ED8\u8BA4\u5168\u5C40\u8272\u8868")]),t("p",[e._v("name(Array)\uFF1A\u6570\u636E\u540D\u79F0\uFF0C\u6570\u7EC4\u957F\u5EA6\u4E0E'data'\u4FDD\u6301\u4E00\u81F4")]),t("div",{staticClass:"demo"},[t("chart-scatter",{attrs:{data:e.data}})],1),e._m(0)])},E=[function(){var o=this,e=o._self._c;return e("pre",{staticClass:"code"},[o._v("      "),e("textarea",{attrs:{readonly:""}},[o._v(`      <chart-scatter :data="data" />
      `)]),o._v(`
  `)])}],X=y(k,Y,E,!1,null,"993984db",null,null);const it=X.exports;export{it as default};
