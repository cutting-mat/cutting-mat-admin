import{n as l}from"./index.dd498c01.js";import"./ui.9b8b7178.js";var s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("el-form",{ref:"form",staticClass:"auth_mobile",attrs:{model:e.formData,rules:e.rules,"label-position":"left"},nativeOn:{submit:function(r){return r.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e.anonymousMobile?t("el-form-item",[e._v("\u7ED1\u5B9A\u624B\u673A\uFF1A"+e._s(e.anonymousMobile))]):e._e(),t("el-form-item",{attrs:{prop:"inputMobile"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u7ED1\u5B9A\u624B\u673A","prefix-icon":"el-icon-message"},model:{value:e.formData.inputMobile,callback:function(r){e.$set(e.formData,"inputMobile",r)},expression:"formData.inputMobile"}})],1),t("el-form-item",{attrs:{prop:"userInput"}},[t("InputSMS",{ref:"InputSMS",attrs:{type:e.command,mobile:e.formData.inputMobile},on:{click:e.sendValidCode}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{"native-type":"submit",type:"primary"}},[e._v(" \u7ACB\u5373\u9A8C\u8BC1 ")])],1)],1)},a=[];const u={props:{command:{type:String,required:!1}},data(){return{formData:{id:null,inputMobile:null},rules:{inputMobile:[{validator:(t,r,i)=>{if(!r)i(new Error("\u8BF7\u8F93\u5165\u7ED1\u5B9A\u624B\u673A"));else{if(this.userMobile&&this.userMobile!==r)return i(new Error("\u624B\u673A\u53F7\u4E0D\u6B63\u786E"));i()}},trigger:[]}],userInput:[{validator:()=>new Promise((t,r)=>{this.$refs.InputSMS.valid().then(i=>{this.resData=i,t()}).catch(i=>{r(i)})}),trigger:[]}]},resData:null}},computed:{userMobile(){return String(this.$store.user.mobile||"")},anonymousMobile(){if(this.userMobile){const e=this.userMobile.split("");return`${e.map((t,r)=>r<3||e.length-r<3?t:"*").join("")}`}return""}},methods:{sendValidCode(){this.$refs.form.validateField("inputMobile",e=>{e||this.$refs.InputSMS.send()})},handleSubmit(){this.$refs.form.validate(e=>{e&&this.$emit("success",this.resData)})}}},n={};var m=l(u,s,a,!1,p,"6861eb39",null,null);function p(e){for(let o in n)this[o]=n[o]}var c=function(){return m.exports}();export{c as default};
